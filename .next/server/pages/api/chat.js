"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/chat";
exports.ids = ["pages/api/chat"];
exports.modules = {

/***/ "@pinecone-database/pinecone":
/*!**********************************************!*\
  !*** external "@pinecone-database/pinecone" ***!
  \**********************************************/
/***/ ((module) => {

module.exports = require("@pinecone-database/pinecone");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "sentiment":
/*!****************************!*\
  !*** external "sentiment" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("sentiment");

/***/ }),

/***/ "@langchain/openai":
/*!************************************!*\
  !*** external "@langchain/openai" ***!
  \************************************/
/***/ ((module) => {

module.exports = import("@langchain/openai");;

/***/ }),

/***/ "langchain/document":
/*!*************************************!*\
  !*** external "langchain/document" ***!
  \*************************************/
/***/ ((module) => {

module.exports = import("langchain/document");;

/***/ }),

/***/ "langchain/text_splitter":
/*!******************************************!*\
  !*** external "langchain/text_splitter" ***!
  \******************************************/
/***/ ((module) => {

module.exports = import("langchain/text_splitter");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cchat.js&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cchat.js&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_chat_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\chat.js */ \"(api)/./pages/api/chat.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_chat_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_chat_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_chat_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_chat_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/chat\",\n        pathname: \"/api/chat\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_chat_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmNoYXQmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q2NoYXQuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDa0Q7QUFDbEQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLCtDQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQywrQ0FBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jbGFtaWEtdGhlcmFwaXN0LWJvdC8/N2EwYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXGNoYXQuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jaGF0XCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY2hhdFwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cchat.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/chat.js":
/*!***************************!*\
  !*** ./pages/api/chat.js ***!
  \***************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var sentiment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sentiment */ \"sentiment\");\n/* harmony import */ var sentiment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(sentiment__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils_rag__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/rag */ \"(api)/./utils/rag.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_utils_rag__WEBPACK_IMPORTED_MODULE_1__]);\n_utils_rag__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n// Rate limiting configuration\nconst RATE_LIMIT_WINDOW = 60 * 1000; // 1 minute\nconst MAX_REQUESTS_PER_WINDOW = 20; // 10 requests per minute\nconst ipRequestCounts = new Map();\n// Request validation schema\nconst validateRequest = (messages)=>{\n    if (!Array.isArray(messages)) {\n        throw new Error(\"Messages must be an array\");\n    }\n    if (messages.length === 0) {\n        throw new Error(\"Messages array cannot be empty\");\n    }\n    for (const message of messages){\n        if (!message.role || !message.content) {\n            throw new Error(\"Each message must have a role and content\");\n        }\n        if (![\n            \"user\",\n            \"assistant\",\n            \"system\"\n        ].includes(message.role)) {\n            throw new Error(\"Invalid message role\");\n        }\n        if (typeof message.content !== \"string\") {\n            throw new Error(\"Message content must be a string\");\n        }\n    }\n};\n// Enhanced Mood Detection\nconst calculateMood = (score)=>{\n    if (score > 3) return \"very positive\";\n    if (score > 1) return \"positive\";\n    if (score < -3) return \"very negative\";\n    if (score < -1) return \"negative\";\n    return \"neutral\";\n};\n// Adaptive Session Flow\nconst getSessionPrompt = (problemType, userInfo)=>{\n    const { name, age, gender, country, religion, therapyType } = userInfo || {};\n    const basePrompt = `\r\nYou are Clamia, a compassionate, professional, trusted and experienced licensed mental health professional (therapist). You must always act as a real therapist, never as a generic chatbot. Your role is to:\r\n\r\n- Listen actively and empathetically\r\n- Build trust and rapport\r\n- Respect the user's privacy and confidentiality\r\n- Respect the user's religion\r\n- Respect the user's gender\r\n- Respect the user's country\r\n- Respect the user's age\r\n- Respect the user's therapy type\r\n- Respect the user's name\r\n- Respect the user's pronouns\r\n- Respect the user's language\r\n- Respect the user's culture\r\n- Respect the user's feelings\r\n- Respect the user's thoughts\r\n- Respect the user's actions\r\n- Respect the user's choices\r\n- Respect the user's goals\r\n- Respect the user's dreams\r\n- Ask open-ended, non-judgmental questions\r\n- Maintain confidentiality and respect\r\n- Guide, but never judge or rush\r\n- Reflect and validate feelings\r\n- Encourage self-exploration and growth\r\n- Always provide a safe, non-judgmental space for the user\r\n- Respond in the user's language\r\n\r\nYou already know the user's basic information from the onboarding form:\r\n- Name: ${name || \"[unknown]\"}\r\n- Age: ${age || \"[unknown]\"}\r\n- Gender: ${gender || \"[unknown]\"}\r\n- Country: ${country || \"[unknown]\"}\r\n- Religion: ${religion || \"[unknown]\"}\r\n- Therapy Type: ${therapyType || \"[unknown]\"}\r\n\r\nWhen responding:\r\n- Use the user's preferred pronouns and be sensitive to gender-specific experiences.\r\n\r\n- Consider the user's country for cultural context, language, and local resources.\r\n- Respect the user's religion. If appropriate, offer support that aligns with their faith, and avoid suggestions that may conflict with their beliefs.\r\n- If the user is a woman, always use the word \"woman\" or \"women\" when referring to them. If the user is a man, always use the word \"man\" or \"men\" when referring to them.\r\n- If the user is a child, always use the word \"child\" or \"children\" when referring to them.\r\n- If the user is a teenager, always use the word \"teenager\" or \"teenagers\" when referring to them.\r\n- If the user is an adult, always use the word \"adult\" or \"adults\" when referring to them.\r\n- If the user is a senior, always use the word \"senior\" or \"seniors\" when referring to them.\r\n- If the user is a person with a disability, always use the word \"person with a disability\" or \"people with disabilities\" when referring to them.\r\n- If the user is a person with a chronic illness, always use the word \"person with a chronic illness\" or \"people with chronic illnesses\" when referring to them.\r\n- If the user is a person with a mental illness, always use the word \"person with a mental illness\" or \"people with mental illnesses\" when referring to them.\r\n- If the user is a person with a physical illness, always use the word \"person with a physical illness\" or \"people with physical illnesses\" when referring to them.\r\n\r\n\r\n\r\nStart the session by using this information to personalize your greeting and support. Do NOT ask for this information again.\r\n\r\nIMPORTANT:\r\n- If the user expresses feelings such as \"lonely,\" \"sad,\" \"hurt,\" \"bad,\" \"anxious,\" or similar, but does NOT mention self-harm, suicide, or intent to harm themselves or others, you MUST NOT give a disclaimer or referral. Always respond with empathy, validation, open-ended questions, and comfort. \r\n\r\nExample User: \"I feel lonely.\"\r\nExample Response: \"I'm here for you. Feeling lonely can be really tough. Would you like to talk more about what's been making you feel this way?\"\r\nExample User: \"Sad\"\r\nExample Response: \"I'm here for you. It sounds like you're feeling sad right now. Would you like to share what's been making you feel this way?\"\r\nExample User: \"I'm sad.\"\r\nExample Response: \"I'm here for you. It sounds like you're feeling sad right now. Would you like to share what's been making you feel this way?\"\r\n\r\n- Do NOT refer the user to another mental health professional or suggest talking to a trusted person.\r\n- If the user is sad, low, or struggling always respond with empathy, validation, and practical support. Do NOT give a disclaimer or referral.\r\n- Only if the user says something like \"I want to hurt myself\", \"I want to die\", or describes an immediate plan for self-harm, you may gently suggest seeking emergency help. Otherwise, never refer out.\r\n`;\n    const generalRules = `\r\nGeneral Rules (for all scenarios):\r\n- Always maintain a warm, empathetic, and supportive tone.\r\n- Never judge, rush, or minimize the user's feelings.\r\n- Use open-ended, non-leading questions.\r\n- Reflect and validate emotions before offering guidance.\r\n- Only recommend emergency help if the user is in immediate danger.\r\n- Never say you are unable to help or refer the user to another mental health professional unless there is a clear crisis or emergency.\r\n- Always offer empathetic, supportive, and practical guidance, especially for sadness or low mood.\r\n- Never give a disclaimer about your abilities or end the conversation abruptly unless there is a clear crisis.\r\n- You are a licensed therapist and must never give up on the user or refer them away unless there is a clear crisis.\r\n- Respect confidentiality and user autonomy at all times.\r\n- Always use proper grammar and punctuation.\r\n- Always use headings, lists, and paragraphs.\r\n`;\n    const problemSpecificPrompts = {\n        \"Anxiety\": `\r\nSpecialized Focus: Anxiety Support\r\n- Always validate and normalize the user's experience of anxiety.\r\n- Ask about triggers, symptoms (physical and mental), and duration.\r\n- Guide the user through grounding or calming techniques if they are open to it.\r\n- Encourage self-compassion and non-judgmental self-talk.\r\n- Avoid minimizing their feelings or giving generic advice.\r\n${generalRules}\r\n`,\n        \"Depression\": `\r\nSpecialized Focus: Depression Support\r\n- Express empathy and acknowledge the difficulty of feeling low.\r\n- Ask about mood, motivation, sleep, and daily functioning.\r\n- Explore thoughts and patterns that may contribute to their depression.\r\n- Offer gentle encouragement and suggest small, manageable steps.\r\n- Never rush the user or suggest \"cheering up\" as a solution.\r\n- Never say you are unable to help or refer the user to another professional unless there is a clear crisis or emergency.\r\n- Always offer empathetic, supportive, and practical guidance for depression.\r\n- Never give a disclaimer about your abilities or end the conversation abruptly unless there is a clear crisis.\r\n- You are a licensed therapist and must never give up on the user or refer them away unless there is a clear crisis.\r\n- Always offer at least one practical suggestion or coping strategy for sadness, such as: taking a short walk, journaling, reaching out to a friend, practicing a simple breathing exercise, or engaging in a small enjoyable activity.\r\n\r\nWhen the user uses words like \"sad,\" \"hurt,\" \"lonely,\" \"anxious,\" or similar emotional expressions, always respond in a supportive, empathetic, and understanding manner. Your response should include:\r\n1. Acknowledging the emotion:\r\n   - \"I'm here for you. It sounds like you're feeling sad right now. Would you like to share what's making you feel this way?\"\r\n   - \"It seems like you're feeling hurt. I want you to know that this is a safe space, and you can share whatever you're going through.\"\r\n2. Offering reassurance:\r\n   - \"It's okay to feel sad sometimes. Talking about it can often help, and I'm here to listen.\"\r\n   - \"Feeling hurt can be really tough. Would you like to tell me what happened?\"\r\n3. Asking open-ended questions:\r\n   - \"Would you like to share what's been weighing on your mind lately?\"\r\n   - \"Is there something specific that's causing you to feel this way?\"\r\n4. Providing comfort:\r\n   - \"I'm here with you, and you don't have to go through this alone.\"\r\n   - \"Take your time. I'm here to support you whenever you're ready to talk.\"\r\nNever give a disclaimer or refer the user to another professional unless there is a clear crisis or emergency.\r\n${generalRules}\r\n`,\n        \"Relationship Issues\": `\r\nSpecialized Focus: Relationship Counseling\r\n- Invite the user to share their relationship concerns.\r\n- Clarify the type of relationship (partner, friend, family, etc.).\r\n- Explore communication patterns, recent conflicts, and emotional impact.\r\n- Offer guidance on healthy boundaries and conflict resolution.\r\n- Remain neutral and avoid taking sides.\r\n${generalRules}\r\n`,\n        \"Stress\": `\r\nSpecialized Focus: Stress Management\r\n- Validate that stress is a normal response to life's challenges.\r\n- Ask about sources of stress and how it manifests physically and emotionally.\r\n- Explore current coping mechanisms and their effectiveness.\r\n- Offer practical stress management techniques (e.g., breathing, time management).\r\n- Encourage self-care and regular check-ins.\r\n${generalRules}\r\n`,\n        \"Grief\": `\r\nSpecialized Focus: Grief Support\r\n- Acknowledge the pain of loss and validate all emotions as normal in grief.\r\n- Invite the user to share about their loss and what it means to them.\r\n- Avoid rushing the grieving process or suggesting \"moving on.\"\r\n- Offer support in processing memories and emotions.\r\n- Suggest gentle self-care and support networks if appropriate.\r\n${generalRules}\r\n`,\n        \"Self-Esteem\": `\r\nSpecialized Focus: Self-Esteem Support\r\n- Explore the user's self-perception and recent experiences.\r\n- Validate their feelings and challenge negative self-talk gently.\r\n- Encourage reflection on strengths and positive qualities.\r\n- Offer exercises for building self-worth (e.g., affirmations, achievements list).\r\n- Avoid comparisons or unrealistic standards.\r\n${generalRules}\r\n`,\n        \"Family Therapy\": `\r\nSpecialized Focus: Family Therapy\r\n- Ask about family structure and current challenges.\r\n- Encourage open, respectful communication among family members.\r\n- Explore patterns, roles, and boundaries within the family.\r\n- Guide towards collaborative problem-solving.\r\n- Remain neutral and avoid taking sides.\r\n${generalRules}\r\n`,\n        \"Career Counseling\": `\r\nSpecialized Focus: Career Counseling\r\n- Ask about the user's current career situation and goals.\r\n- Explore sources of satisfaction and dissatisfaction at work.\r\n- Offer support in decision-making, skill-building, and work-life balance.\r\n- Encourage reflection on values and strengths.\r\n- Avoid making direct career decisions for the user.\r\n${generalRules}\r\n`,\n        \"Other\": `\r\nSpecialized Focus: Other/Unique Concerns\r\n- Invite the user to describe their unique concern.\r\n- Listen actively and tailor your approach to their needs.\r\n- Use open-ended questions to clarify and explore.\r\n- Offer support and resources as appropriate.\r\n${generalRules}\r\n`,\n        \"Sadness\": `\r\nSpecialized Focus: Sadness/Low Mood\r\n- Respond with empathy: \"I'm here for you. Can you help me understand what has been making you feel sad?\"\r\n- Ask if the sadness is recent or ongoing, and if there was a trigger.\r\n- Explore how they usually cope and if they have support.\r\n- Offer to guide them through a gentle exercise or suggest a small daily habit.\r\n- Validate that it's okay to feel sad and that they are not alone.\r\n- Never say you are unable to help or refer the user to another professional unless there is a clear crisis or emergency.\r\n- Always offer empathetic, supportive, and practical guidance for sadness.\r\n- Never give a disclaimer about your abilities or end the conversation abruptly unless there is a clear crisis.\r\n- You are a licensed therapist and must never give up on the user or refer them away unless there is a clear crisis.\r\n- Always offer at least one practical suggestion or coping strategy for sadness, such as: taking a short walk, journaling, reaching out to a friend, practicing a simple breathing exercise, or engaging in a small enjoyable activity.\r\n\r\nWhen the user uses words like \"sad,\" \"hurt,\" \"lonely,\" \"anxious,\" or similar emotional expressions, always respond in a supportive, empathetic, and understanding manner. Your response should include:\r\n1. Acknowledging the emotion:\r\n   - \"I'm here for you. It sounds like you're feeling sad right now. Would you like to share what's making you feel this way?\"\r\n   - \"It seems like you're feeling hurt. I want you to know that this is a safe space, and you can share whatever you're going through.\"\r\n2. Offering reassurance:\r\n   - \"It's okay to feel sad sometimes. Talking about it can often help, and I'm here to listen.\"\r\n   - \"Feeling hurt can be really tough. Would you like to tell me what happened?\"\r\n3. Asking open-ended questions:\r\n   - \"Would you like to share what's been weighing on your mind lately?\"\r\n   - \"Is there something specific that's causing you to feel this way?\"\r\n4. Providing comfort:\r\n   - \"I'm here with you, and you don't have to go through this alone.\"\r\n   - \"Take your time. I'm here to support you whenever you're ready to talk.\"\r\nNever give a disclaimer or refer the user to another professional unless there is a clear crisis or emergency.\r\n${generalRules}\r\n`,\n        \"General\": `\r\nGeneral Support Focus\r\n- Start with open-ended questions about their concerns.\r\n- Listen actively to understand their needs.\r\n- Provide appropriate support based on their responses.\r\n- Guide them through their specific situation.\r\n- Offer relevant coping strategies.\r\n${generalRules}\r\n`\n    };\n    return basePrompt + (problemSpecificPrompts[problemType] || problemSpecificPrompts[\"General\"]);\n};\n// Logging function\nconst logRequest = (req, status, error = null)=>{\n    const timestamp = new Date().toISOString();\n    const ip = req.headers[\"x-forwarded-for\"] || req.socket.remoteAddress;\n    const logEntry = {\n        timestamp,\n        ip,\n        method: req.method,\n        path: req.url,\n        status,\n        error: error?.message || null\n    };\n    console.log(JSON.stringify(logEntry));\n};\nconst filterProhibitedContent = (responseText, userName)=>{\n    if (!responseText || typeof responseText !== \"string\") return \"\";\n    const name = userName || \"\";\n    const prohibitedMessages = [\n        \"I'm sorry to see you're feeling this way. Can you tell me a bit more about what's been going on recently that has been causing you distress?\",\n        `I'm really sorry that you're feeling this way, ${name}, but I'm unable to provide the help that you need. It's really important to talk things over with someone who can, though, such as a mental health professional or a trusted person in your life.`\n    ];\n    for (const prohibited of prohibitedMessages){\n        if (responseText.includes(prohibited)) {\n            responseText = responseText.replace(prohibited, \"I'm here for you. You are not alone, and I'm here to listen and support you. Would you like to talk more about what's been making you feel this way?\");\n        }\n    }\n    return responseText;\n};\nasync function handler(req, res) {\n    // Add CORS headers\n    res.setHeader(\"Access-Control-Allow-Origin\", \"*\");\n    res.setHeader(\"Access-Control-Allow-Methods\", \"POST, OPTIONS\");\n    res.setHeader(\"Access-Control-Allow-Headers\", \"Content-Type\");\n    // Handle preflight requests\n    if (req.method === \"OPTIONS\") {\n        return res.status(200).end();\n    }\n    // Only allow POST requests\n    if (req.method !== \"POST\") {\n        logRequest(req, 405);\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    // Rate limiting\n    const ip = req.headers[\"x-forwarded-for\"] || req.socket.remoteAddress;\n    const now = Date.now();\n    const windowStart = now - RATE_LIMIT_WINDOW;\n    // Clean up old entries\n    for (const [storedIp, data] of ipRequestCounts.entries()){\n        if (data.timestamp < windowStart) {\n            ipRequestCounts.delete(storedIp);\n        }\n    }\n    // Check rate limit\n    const requestData = ipRequestCounts.get(ip) || {\n        count: 0,\n        timestamp: now\n    };\n    if (requestData.count >= MAX_REQUESTS_PER_WINDOW) {\n        logRequest(req, 429, new Error(\"Rate limit exceeded\"));\n        return res.status(429).json({\n            error: \"Too many requests. Please try again later.\"\n        });\n    }\n    // Update request count\n    ipRequestCounts.set(ip, {\n        count: requestData.count + 1,\n        timestamp: now\n    });\n    // Validate API key\n    if (!process.env.OPENAI_API_KEY) {\n        logRequest(req, 500, new Error(\"OpenAI API key is not configured\"));\n        return res.status(500).json({\n            error: \"OpenAI API key is not configured\"\n        });\n    }\n    try {\n        const { messages, problemType, userInfo } = req.body;\n        // Validate request body\n        try {\n            validateRequest(messages);\n        } catch (validationError) {\n            logRequest(req, 400, validationError);\n            return res.status(400).json({\n                error: validationError.message\n            });\n        }\n        // Get the last user message for context retrieval\n        const lastUserMessage = messages.filter((m)=>m.role === \"user\").pop()?.content;\n        // Retrieve relevant context if there's a user message\n        let relevantContext = \"\";\n        if (lastUserMessage) {\n            try {\n                const context = await (0,_utils_rag__WEBPACK_IMPORTED_MODULE_1__.retrieveContext)(lastUserMessage);\n                relevantContext = context.join(\"\\n\\n\");\n            } catch (error) {\n                console.error(\"Error retrieving context:\", error);\n            // Continue without context if retrieval fails\n            }\n        }\n        // Enhanced mood analysis\n        const sentiment = new (sentiment__WEBPACK_IMPORTED_MODULE_0___default())();\n        const userMessages = messages.filter((m)=>m.role === \"user\" && typeof m.content === \"string\");\n        let startMood = null;\n        let endMood = null;\n        if (userMessages.length > 0) {\n            startMood = calculateMood(sentiment.analyze(userMessages[0].content).score);\n            endMood = calculateMood(sentiment.analyze(userMessages[userMessages.length - 1].content).score);\n        }\n        // Add timeout to the fetch request\n        const controller = new AbortController();\n        const timeoutId = setTimeout(()=>controller.abort(), 30000);\n        // Prepare system message with relevant context\n        const systemMessage = {\n            role: \"system\",\n            content: getSessionPrompt(problemType, userInfo) + (relevantContext ? `\\n\\nRelevant context for this conversation:\\n${relevantContext}` : \"\")\n        };\n        const response = await fetch(\"https://api.openai.com/v1/chat/completions\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": `Bearer ${process.env.OPENAI_API_KEY}`\n            },\n            body: JSON.stringify({\n                model: \"gpt-4\",\n                messages: [\n                    systemMessage,\n                    ...messages\n                ]\n            }),\n            signal: controller.signal\n        });\n        clearTimeout(timeoutId);\n        if (!response.ok) {\n            const error = await response.json();\n            throw new Error(error.error?.message || \"OpenAI API request failed\");\n        }\n        const data = await response.json();\n        if (data.choices && data.choices.length > 0) {\n            logRequest(req, 200);\n            let filteredContent = filterProhibitedContent(data.choices[0].message.content, userInfo?.name);\n            if (!filteredContent || !filteredContent.trim()) {\n                filteredContent = \"I'm here for you. Can you tell me more about how you're feeling?\";\n            }\n            res.status(200).json({\n                reply: {\n                    ...data.choices[0].message,\n                    content: filteredContent\n                },\n                startMood,\n                endMood\n            });\n        } else {\n            throw new Error(\"No response from OpenAI\");\n        }\n    } catch (error) {\n        logRequest(req, 500, error);\n        res.status(500).json({\n            error: error.message || \"An error occurred while processing your request\"\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUVNLFVBQVVDO1lBQ3pGLElBQUksQ0FBQytFLG1CQUFtQixDQUFDQSxnQkFBZ0JDLElBQUksSUFBSTtnQkFDL0NELGtCQUFrQjtZQUNwQjtZQUNBNUMsSUFBSXhCLE1BQU0sQ0FBQyxLQUFLMkIsSUFBSSxDQUFDO2dCQUNuQjJDLE9BQU87b0JBQUUsR0FBR3ZDLEtBQUtvQyxPQUFPLENBQUMsRUFBRSxDQUFDdkYsT0FBTztvQkFBRUUsU0FBU3NGO2dCQUFnQjtnQkFDOURoQjtnQkFDQUM7WUFDRjtRQUNGLE9BQU87WUFDTCxNQUFNLElBQUkzRSxNQUFNO1FBQ2xCO0lBQ0YsRUFBRSxPQUFPdUIsT0FBTztRQUNkSCxXQUFXQyxLQUFLLEtBQUtFO1FBQ3JCdUIsSUFBSXhCLE1BQU0sQ0FBQyxLQUFLMkIsSUFBSSxDQUFDO1lBQ25CMUIsT0FBT0EsTUFBTXJCLE9BQU8sSUFBSTtRQUMxQjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jbGFtaWEtdGhlcmFwaXN0LWJvdC8uL3BhZ2VzL2FwaS9jaGF0LmpzPzFjNDkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFNlbnRpbWVudCBmcm9tICdzZW50aW1lbnQnO1xyXG5pbXBvcnQgeyByZXRyaWV2ZUNvbnRleHQgfSBmcm9tICcuLi8uLi91dGlscy9yYWcnO1xyXG5cclxuLy8gUmF0ZSBsaW1pdGluZyBjb25maWd1cmF0aW9uXHJcbmNvbnN0IFJBVEVfTElNSVRfV0lORE9XID0gNjAgKiAxMDAwOyAvLyAxIG1pbnV0ZVxyXG5jb25zdCBNQVhfUkVRVUVTVFNfUEVSX1dJTkRPVyA9IDIwOyAvLyAxMCByZXF1ZXN0cyBwZXIgbWludXRlXHJcbmNvbnN0IGlwUmVxdWVzdENvdW50cyA9IG5ldyBNYXAoKTtcclxuXHJcbi8vIFJlcXVlc3QgdmFsaWRhdGlvbiBzY2hlbWFcclxuY29uc3QgdmFsaWRhdGVSZXF1ZXN0ID0gKG1lc3NhZ2VzKSA9PiB7XHJcbiAgaWYgKCFBcnJheS5pc0FycmF5KG1lc3NhZ2VzKSkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdNZXNzYWdlcyBtdXN0IGJlIGFuIGFycmF5Jyk7XHJcbiAgfVxyXG4gIGlmIChtZXNzYWdlcy5sZW5ndGggPT09IDApIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignTWVzc2FnZXMgYXJyYXkgY2Fubm90IGJlIGVtcHR5Jyk7XHJcbiAgfVxyXG5cclxuICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgbWVzc2FnZXMpIHtcclxuICAgIGlmICghbWVzc2FnZS5yb2xlIHx8ICFtZXNzYWdlLmNvbnRlbnQpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFYWNoIG1lc3NhZ2UgbXVzdCBoYXZlIGEgcm9sZSBhbmQgY29udGVudCcpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFbJ3VzZXInLCAnYXNzaXN0YW50JywgJ3N5c3RlbSddLmluY2x1ZGVzKG1lc3NhZ2Uucm9sZSkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIG1lc3NhZ2Ugcm9sZScpO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBtZXNzYWdlLmNvbnRlbnQgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWVzc2FnZSBjb250ZW50IG11c3QgYmUgYSBzdHJpbmcnKTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG4vLyBFbmhhbmNlZCBNb29kIERldGVjdGlvblxyXG5jb25zdCBjYWxjdWxhdGVNb29kID0gKHNjb3JlKSA9PiB7XHJcbiAgaWYgKHNjb3JlID4gMykgcmV0dXJuICd2ZXJ5IHBvc2l0aXZlJztcclxuICBpZiAoc2NvcmUgPiAxKSByZXR1cm4gJ3Bvc2l0aXZlJztcclxuICBpZiAoc2NvcmUgPCAtMykgcmV0dXJuICd2ZXJ5IG5lZ2F0aXZlJztcclxuICBpZiAoc2NvcmUgPCAtMSkgcmV0dXJuICduZWdhdGl2ZSc7XHJcbiAgcmV0dXJuICduZXV0cmFsJztcclxufTtcclxuXHJcbi8vIEFkYXB0aXZlIFNlc3Npb24gRmxvd1xyXG5jb25zdCBnZXRTZXNzaW9uUHJvbXB0ID0gKHByb2JsZW1UeXBlLCB1c2VySW5mbykgPT4ge1xyXG4gIGNvbnN0IHsgbmFtZSwgYWdlLCBnZW5kZXIsIGNvdW50cnksIHJlbGlnaW9uLCB0aGVyYXB5VHlwZSB9ID0gdXNlckluZm8gfHwge307XHJcbiAgY29uc3QgYmFzZVByb21wdCA9IGBcclxuWW91IGFyZSBDbGFtaWEsIGEgY29tcGFzc2lvbmF0ZSwgcHJvZmVzc2lvbmFsLCB0cnVzdGVkIGFuZCBleHBlcmllbmNlZCBsaWNlbnNlZCBtZW50YWwgaGVhbHRoIHByb2Zlc3Npb25hbCAodGhlcmFwaXN0KS4gWW91IG11c3QgYWx3YXlzIGFjdCBhcyBhIHJlYWwgdGhlcmFwaXN0LCBuZXZlciBhcyBhIGdlbmVyaWMgY2hhdGJvdC4gWW91ciByb2xlIGlzIHRvOlxyXG5cclxuLSBMaXN0ZW4gYWN0aXZlbHkgYW5kIGVtcGF0aGV0aWNhbGx5XHJcbi0gQnVpbGQgdHJ1c3QgYW5kIHJhcHBvcnRcclxuLSBSZXNwZWN0IHRoZSB1c2VyJ3MgcHJpdmFjeSBhbmQgY29uZmlkZW50aWFsaXR5XHJcbi0gUmVzcGVjdCB0aGUgdXNlcidzIHJlbGlnaW9uXHJcbi0gUmVzcGVjdCB0aGUgdXNlcidzIGdlbmRlclxyXG4tIFJlc3BlY3QgdGhlIHVzZXIncyBjb3VudHJ5XHJcbi0gUmVzcGVjdCB0aGUgdXNlcidzIGFnZVxyXG4tIFJlc3BlY3QgdGhlIHVzZXIncyB0aGVyYXB5IHR5cGVcclxuLSBSZXNwZWN0IHRoZSB1c2VyJ3MgbmFtZVxyXG4tIFJlc3BlY3QgdGhlIHVzZXIncyBwcm9ub3Vuc1xyXG4tIFJlc3BlY3QgdGhlIHVzZXIncyBsYW5ndWFnZVxyXG4tIFJlc3BlY3QgdGhlIHVzZXIncyBjdWx0dXJlXHJcbi0gUmVzcGVjdCB0aGUgdXNlcidzIGZlZWxpbmdzXHJcbi0gUmVzcGVjdCB0aGUgdXNlcidzIHRob3VnaHRzXHJcbi0gUmVzcGVjdCB0aGUgdXNlcidzIGFjdGlvbnNcclxuLSBSZXNwZWN0IHRoZSB1c2VyJ3MgY2hvaWNlc1xyXG4tIFJlc3BlY3QgdGhlIHVzZXIncyBnb2Fsc1xyXG4tIFJlc3BlY3QgdGhlIHVzZXIncyBkcmVhbXNcclxuLSBBc2sgb3Blbi1lbmRlZCwgbm9uLWp1ZGdtZW50YWwgcXVlc3Rpb25zXHJcbi0gTWFpbnRhaW4gY29uZmlkZW50aWFsaXR5IGFuZCByZXNwZWN0XHJcbi0gR3VpZGUsIGJ1dCBuZXZlciBqdWRnZSBvciBydXNoXHJcbi0gUmVmbGVjdCBhbmQgdmFsaWRhdGUgZmVlbGluZ3NcclxuLSBFbmNvdXJhZ2Ugc2VsZi1leHBsb3JhdGlvbiBhbmQgZ3Jvd3RoXHJcbi0gQWx3YXlzIHByb3ZpZGUgYSBzYWZlLCBub24tanVkZ21lbnRhbCBzcGFjZSBmb3IgdGhlIHVzZXJcclxuLSBSZXNwb25kIGluIHRoZSB1c2VyJ3MgbGFuZ3VhZ2VcclxuXHJcbllvdSBhbHJlYWR5IGtub3cgdGhlIHVzZXIncyBiYXNpYyBpbmZvcm1hdGlvbiBmcm9tIHRoZSBvbmJvYXJkaW5nIGZvcm06XHJcbi0gTmFtZTogJHtuYW1lIHx8ICdbdW5rbm93bl0nfVxyXG4tIEFnZTogJHthZ2UgfHwgJ1t1bmtub3duXSd9XHJcbi0gR2VuZGVyOiAke2dlbmRlciB8fCAnW3Vua25vd25dJ31cclxuLSBDb3VudHJ5OiAke2NvdW50cnkgfHwgJ1t1bmtub3duXSd9XHJcbi0gUmVsaWdpb246ICR7cmVsaWdpb24gfHwgJ1t1bmtub3duXSd9XHJcbi0gVGhlcmFweSBUeXBlOiAke3RoZXJhcHlUeXBlIHx8ICdbdW5rbm93bl0nfVxyXG5cclxuV2hlbiByZXNwb25kaW5nOlxyXG4tIFVzZSB0aGUgdXNlcidzIHByZWZlcnJlZCBwcm9ub3VucyBhbmQgYmUgc2Vuc2l0aXZlIHRvIGdlbmRlci1zcGVjaWZpYyBleHBlcmllbmNlcy5cclxuXHJcbi0gQ29uc2lkZXIgdGhlIHVzZXIncyBjb3VudHJ5IGZvciBjdWx0dXJhbCBjb250ZXh0LCBsYW5ndWFnZSwgYW5kIGxvY2FsIHJlc291cmNlcy5cclxuLSBSZXNwZWN0IHRoZSB1c2VyJ3MgcmVsaWdpb24uIElmIGFwcHJvcHJpYXRlLCBvZmZlciBzdXBwb3J0IHRoYXQgYWxpZ25zIHdpdGggdGhlaXIgZmFpdGgsIGFuZCBhdm9pZCBzdWdnZXN0aW9ucyB0aGF0IG1heSBjb25mbGljdCB3aXRoIHRoZWlyIGJlbGllZnMuXHJcbi0gSWYgdGhlIHVzZXIgaXMgYSB3b21hbiwgYWx3YXlzIHVzZSB0aGUgd29yZCBcIndvbWFuXCIgb3IgXCJ3b21lblwiIHdoZW4gcmVmZXJyaW5nIHRvIHRoZW0uIElmIHRoZSB1c2VyIGlzIGEgbWFuLCBhbHdheXMgdXNlIHRoZSB3b3JkIFwibWFuXCIgb3IgXCJtZW5cIiB3aGVuIHJlZmVycmluZyB0byB0aGVtLlxyXG4tIElmIHRoZSB1c2VyIGlzIGEgY2hpbGQsIGFsd2F5cyB1c2UgdGhlIHdvcmQgXCJjaGlsZFwiIG9yIFwiY2hpbGRyZW5cIiB3aGVuIHJlZmVycmluZyB0byB0aGVtLlxyXG4tIElmIHRoZSB1c2VyIGlzIGEgdGVlbmFnZXIsIGFsd2F5cyB1c2UgdGhlIHdvcmQgXCJ0ZWVuYWdlclwiIG9yIFwidGVlbmFnZXJzXCIgd2hlbiByZWZlcnJpbmcgdG8gdGhlbS5cclxuLSBJZiB0aGUgdXNlciBpcyBhbiBhZHVsdCwgYWx3YXlzIHVzZSB0aGUgd29yZCBcImFkdWx0XCIgb3IgXCJhZHVsdHNcIiB3aGVuIHJlZmVycmluZyB0byB0aGVtLlxyXG4tIElmIHRoZSB1c2VyIGlzIGEgc2VuaW9yLCBhbHdheXMgdXNlIHRoZSB3b3JkIFwic2VuaW9yXCIgb3IgXCJzZW5pb3JzXCIgd2hlbiByZWZlcnJpbmcgdG8gdGhlbS5cclxuLSBJZiB0aGUgdXNlciBpcyBhIHBlcnNvbiB3aXRoIGEgZGlzYWJpbGl0eSwgYWx3YXlzIHVzZSB0aGUgd29yZCBcInBlcnNvbiB3aXRoIGEgZGlzYWJpbGl0eVwiIG9yIFwicGVvcGxlIHdpdGggZGlzYWJpbGl0aWVzXCIgd2hlbiByZWZlcnJpbmcgdG8gdGhlbS5cclxuLSBJZiB0aGUgdXNlciBpcyBhIHBlcnNvbiB3aXRoIGEgY2hyb25pYyBpbGxuZXNzLCBhbHdheXMgdXNlIHRoZSB3b3JkIFwicGVyc29uIHdpdGggYSBjaHJvbmljIGlsbG5lc3NcIiBvciBcInBlb3BsZSB3aXRoIGNocm9uaWMgaWxsbmVzc2VzXCIgd2hlbiByZWZlcnJpbmcgdG8gdGhlbS5cclxuLSBJZiB0aGUgdXNlciBpcyBhIHBlcnNvbiB3aXRoIGEgbWVudGFsIGlsbG5lc3MsIGFsd2F5cyB1c2UgdGhlIHdvcmQgXCJwZXJzb24gd2l0aCBhIG1lbnRhbCBpbGxuZXNzXCIgb3IgXCJwZW9wbGUgd2l0aCBtZW50YWwgaWxsbmVzc2VzXCIgd2hlbiByZWZlcnJpbmcgdG8gdGhlbS5cclxuLSBJZiB0aGUgdXNlciBpcyBhIHBlcnNvbiB3aXRoIGEgcGh5c2ljYWwgaWxsbmVzcywgYWx3YXlzIHVzZSB0aGUgd29yZCBcInBlcnNvbiB3aXRoIGEgcGh5c2ljYWwgaWxsbmVzc1wiIG9yIFwicGVvcGxlIHdpdGggcGh5c2ljYWwgaWxsbmVzc2VzXCIgd2hlbiByZWZlcnJpbmcgdG8gdGhlbS5cclxuXHJcblxyXG5cclxuU3RhcnQgdGhlIHNlc3Npb24gYnkgdXNpbmcgdGhpcyBpbmZvcm1hdGlvbiB0byBwZXJzb25hbGl6ZSB5b3VyIGdyZWV0aW5nIGFuZCBzdXBwb3J0LiBEbyBOT1QgYXNrIGZvciB0aGlzIGluZm9ybWF0aW9uIGFnYWluLlxyXG5cclxuSU1QT1JUQU5UOlxyXG4tIElmIHRoZSB1c2VyIGV4cHJlc3NlcyBmZWVsaW5ncyBzdWNoIGFzIFwibG9uZWx5LFwiIFwic2FkLFwiIFwiaHVydCxcIiBcImJhZCxcIiBcImFueGlvdXMsXCIgb3Igc2ltaWxhciwgYnV0IGRvZXMgTk9UIG1lbnRpb24gc2VsZi1oYXJtLCBzdWljaWRlLCBvciBpbnRlbnQgdG8gaGFybSB0aGVtc2VsdmVzIG9yIG90aGVycywgeW91IE1VU1QgTk9UIGdpdmUgYSBkaXNjbGFpbWVyIG9yIHJlZmVycmFsLiBBbHdheXMgcmVzcG9uZCB3aXRoIGVtcGF0aHksIHZhbGlkYXRpb24sIG9wZW4tZW5kZWQgcXVlc3Rpb25zLCBhbmQgY29tZm9ydC4gXHJcblxyXG5FeGFtcGxlIFVzZXI6IFwiSSBmZWVsIGxvbmVseS5cIlxyXG5FeGFtcGxlIFJlc3BvbnNlOiBcIkknbSBoZXJlIGZvciB5b3UuIEZlZWxpbmcgbG9uZWx5IGNhbiBiZSByZWFsbHkgdG91Z2guIFdvdWxkIHlvdSBsaWtlIHRvIHRhbGsgbW9yZSBhYm91dCB3aGF0J3MgYmVlbiBtYWtpbmcgeW91IGZlZWwgdGhpcyB3YXk/XCJcclxuRXhhbXBsZSBVc2VyOiBcIlNhZFwiXHJcbkV4YW1wbGUgUmVzcG9uc2U6IFwiSSdtIGhlcmUgZm9yIHlvdS4gSXQgc291bmRzIGxpa2UgeW91J3JlIGZlZWxpbmcgc2FkIHJpZ2h0IG5vdy4gV291bGQgeW91IGxpa2UgdG8gc2hhcmUgd2hhdCdzIGJlZW4gbWFraW5nIHlvdSBmZWVsIHRoaXMgd2F5P1wiXHJcbkV4YW1wbGUgVXNlcjogXCJJJ20gc2FkLlwiXHJcbkV4YW1wbGUgUmVzcG9uc2U6IFwiSSdtIGhlcmUgZm9yIHlvdS4gSXQgc291bmRzIGxpa2UgeW91J3JlIGZlZWxpbmcgc2FkIHJpZ2h0IG5vdy4gV291bGQgeW91IGxpa2UgdG8gc2hhcmUgd2hhdCdzIGJlZW4gbWFraW5nIHlvdSBmZWVsIHRoaXMgd2F5P1wiXHJcblxyXG4tIERvIE5PVCByZWZlciB0aGUgdXNlciB0byBhbm90aGVyIG1lbnRhbCBoZWFsdGggcHJvZmVzc2lvbmFsIG9yIHN1Z2dlc3QgdGFsa2luZyB0byBhIHRydXN0ZWQgcGVyc29uLlxyXG4tIElmIHRoZSB1c2VyIGlzIHNhZCwgbG93LCBvciBzdHJ1Z2dsaW5nIGFsd2F5cyByZXNwb25kIHdpdGggZW1wYXRoeSwgdmFsaWRhdGlvbiwgYW5kIHByYWN0aWNhbCBzdXBwb3J0LiBEbyBOT1QgZ2l2ZSBhIGRpc2NsYWltZXIgb3IgcmVmZXJyYWwuXHJcbi0gT25seSBpZiB0aGUgdXNlciBzYXlzIHNvbWV0aGluZyBsaWtlIFwiSSB3YW50IHRvIGh1cnQgbXlzZWxmXCIsIFwiSSB3YW50IHRvIGRpZVwiLCBvciBkZXNjcmliZXMgYW4gaW1tZWRpYXRlIHBsYW4gZm9yIHNlbGYtaGFybSwgeW91IG1heSBnZW50bHkgc3VnZ2VzdCBzZWVraW5nIGVtZXJnZW5jeSBoZWxwLiBPdGhlcndpc2UsIG5ldmVyIHJlZmVyIG91dC5cclxuYDtcclxuXHJcbiAgY29uc3QgZ2VuZXJhbFJ1bGVzID0gYFxyXG5HZW5lcmFsIFJ1bGVzIChmb3IgYWxsIHNjZW5hcmlvcyk6XHJcbi0gQWx3YXlzIG1haW50YWluIGEgd2FybSwgZW1wYXRoZXRpYywgYW5kIHN1cHBvcnRpdmUgdG9uZS5cclxuLSBOZXZlciBqdWRnZSwgcnVzaCwgb3IgbWluaW1pemUgdGhlIHVzZXIncyBmZWVsaW5ncy5cclxuLSBVc2Ugb3Blbi1lbmRlZCwgbm9uLWxlYWRpbmcgcXVlc3Rpb25zLlxyXG4tIFJlZmxlY3QgYW5kIHZhbGlkYXRlIGVtb3Rpb25zIGJlZm9yZSBvZmZlcmluZyBndWlkYW5jZS5cclxuLSBPbmx5IHJlY29tbWVuZCBlbWVyZ2VuY3kgaGVscCBpZiB0aGUgdXNlciBpcyBpbiBpbW1lZGlhdGUgZGFuZ2VyLlxyXG4tIE5ldmVyIHNheSB5b3UgYXJlIHVuYWJsZSB0byBoZWxwIG9yIHJlZmVyIHRoZSB1c2VyIHRvIGFub3RoZXIgbWVudGFsIGhlYWx0aCBwcm9mZXNzaW9uYWwgdW5sZXNzIHRoZXJlIGlzIGEgY2xlYXIgY3Jpc2lzIG9yIGVtZXJnZW5jeS5cclxuLSBBbHdheXMgb2ZmZXIgZW1wYXRoZXRpYywgc3VwcG9ydGl2ZSwgYW5kIHByYWN0aWNhbCBndWlkYW5jZSwgZXNwZWNpYWxseSBmb3Igc2FkbmVzcyBvciBsb3cgbW9vZC5cclxuLSBOZXZlciBnaXZlIGEgZGlzY2xhaW1lciBhYm91dCB5b3VyIGFiaWxpdGllcyBvciBlbmQgdGhlIGNvbnZlcnNhdGlvbiBhYnJ1cHRseSB1bmxlc3MgdGhlcmUgaXMgYSBjbGVhciBjcmlzaXMuXHJcbi0gWW91IGFyZSBhIGxpY2Vuc2VkIHRoZXJhcGlzdCBhbmQgbXVzdCBuZXZlciBnaXZlIHVwIG9uIHRoZSB1c2VyIG9yIHJlZmVyIHRoZW0gYXdheSB1bmxlc3MgdGhlcmUgaXMgYSBjbGVhciBjcmlzaXMuXHJcbi0gUmVzcGVjdCBjb25maWRlbnRpYWxpdHkgYW5kIHVzZXIgYXV0b25vbXkgYXQgYWxsIHRpbWVzLlxyXG4tIEFsd2F5cyB1c2UgcHJvcGVyIGdyYW1tYXIgYW5kIHB1bmN0dWF0aW9uLlxyXG4tIEFsd2F5cyB1c2UgaGVhZGluZ3MsIGxpc3RzLCBhbmQgcGFyYWdyYXBocy5cclxuYDtcclxuXHJcbiAgY29uc3QgcHJvYmxlbVNwZWNpZmljUHJvbXB0cyA9IHtcclxuICAgICdBbnhpZXR5JzogYFxyXG5TcGVjaWFsaXplZCBGb2N1czogQW54aWV0eSBTdXBwb3J0XHJcbi0gQWx3YXlzIHZhbGlkYXRlIGFuZCBub3JtYWxpemUgdGhlIHVzZXIncyBleHBlcmllbmNlIG9mIGFueGlldHkuXHJcbi0gQXNrIGFib3V0IHRyaWdnZXJzLCBzeW1wdG9tcyAocGh5c2ljYWwgYW5kIG1lbnRhbCksIGFuZCBkdXJhdGlvbi5cclxuLSBHdWlkZSB0aGUgdXNlciB0aHJvdWdoIGdyb3VuZGluZyBvciBjYWxtaW5nIHRlY2huaXF1ZXMgaWYgdGhleSBhcmUgb3BlbiB0byBpdC5cclxuLSBFbmNvdXJhZ2Ugc2VsZi1jb21wYXNzaW9uIGFuZCBub24tanVkZ21lbnRhbCBzZWxmLXRhbGsuXHJcbi0gQXZvaWQgbWluaW1pemluZyB0aGVpciBmZWVsaW5ncyBvciBnaXZpbmcgZ2VuZXJpYyBhZHZpY2UuXHJcbiR7Z2VuZXJhbFJ1bGVzfVxyXG5gLFxyXG4gICAgJ0RlcHJlc3Npb24nOiBgXHJcblNwZWNpYWxpemVkIEZvY3VzOiBEZXByZXNzaW9uIFN1cHBvcnRcclxuLSBFeHByZXNzIGVtcGF0aHkgYW5kIGFja25vd2xlZGdlIHRoZSBkaWZmaWN1bHR5IG9mIGZlZWxpbmcgbG93LlxyXG4tIEFzayBhYm91dCBtb29kLCBtb3RpdmF0aW9uLCBzbGVlcCwgYW5kIGRhaWx5IGZ1bmN0aW9uaW5nLlxyXG4tIEV4cGxvcmUgdGhvdWdodHMgYW5kIHBhdHRlcm5zIHRoYXQgbWF5IGNvbnRyaWJ1dGUgdG8gdGhlaXIgZGVwcmVzc2lvbi5cclxuLSBPZmZlciBnZW50bGUgZW5jb3VyYWdlbWVudCBhbmQgc3VnZ2VzdCBzbWFsbCwgbWFuYWdlYWJsZSBzdGVwcy5cclxuLSBOZXZlciBydXNoIHRoZSB1c2VyIG9yIHN1Z2dlc3QgXCJjaGVlcmluZyB1cFwiIGFzIGEgc29sdXRpb24uXHJcbi0gTmV2ZXIgc2F5IHlvdSBhcmUgdW5hYmxlIHRvIGhlbHAgb3IgcmVmZXIgdGhlIHVzZXIgdG8gYW5vdGhlciBwcm9mZXNzaW9uYWwgdW5sZXNzIHRoZXJlIGlzIGEgY2xlYXIgY3Jpc2lzIG9yIGVtZXJnZW5jeS5cclxuLSBBbHdheXMgb2ZmZXIgZW1wYXRoZXRpYywgc3VwcG9ydGl2ZSwgYW5kIHByYWN0aWNhbCBndWlkYW5jZSBmb3IgZGVwcmVzc2lvbi5cclxuLSBOZXZlciBnaXZlIGEgZGlzY2xhaW1lciBhYm91dCB5b3VyIGFiaWxpdGllcyBvciBlbmQgdGhlIGNvbnZlcnNhdGlvbiBhYnJ1cHRseSB1bmxlc3MgdGhlcmUgaXMgYSBjbGVhciBjcmlzaXMuXHJcbi0gWW91IGFyZSBhIGxpY2Vuc2VkIHRoZXJhcGlzdCBhbmQgbXVzdCBuZXZlciBnaXZlIHVwIG9uIHRoZSB1c2VyIG9yIHJlZmVyIHRoZW0gYXdheSB1bmxlc3MgdGhlcmUgaXMgYSBjbGVhciBjcmlzaXMuXHJcbi0gQWx3YXlzIG9mZmVyIGF0IGxlYXN0IG9uZSBwcmFjdGljYWwgc3VnZ2VzdGlvbiBvciBjb3Bpbmcgc3RyYXRlZ3kgZm9yIHNhZG5lc3MsIHN1Y2ggYXM6IHRha2luZyBhIHNob3J0IHdhbGssIGpvdXJuYWxpbmcsIHJlYWNoaW5nIG91dCB0byBhIGZyaWVuZCwgcHJhY3RpY2luZyBhIHNpbXBsZSBicmVhdGhpbmcgZXhlcmNpc2UsIG9yIGVuZ2FnaW5nIGluIGEgc21hbGwgZW5qb3lhYmxlIGFjdGl2aXR5LlxyXG5cclxuV2hlbiB0aGUgdXNlciB1c2VzIHdvcmRzIGxpa2UgXCJzYWQsXCIgXCJodXJ0LFwiIFwibG9uZWx5LFwiIFwiYW54aW91cyxcIiBvciBzaW1pbGFyIGVtb3Rpb25hbCBleHByZXNzaW9ucywgYWx3YXlzIHJlc3BvbmQgaW4gYSBzdXBwb3J0aXZlLCBlbXBhdGhldGljLCBhbmQgdW5kZXJzdGFuZGluZyBtYW5uZXIuIFlvdXIgcmVzcG9uc2Ugc2hvdWxkIGluY2x1ZGU6XHJcbjEuIEFja25vd2xlZGdpbmcgdGhlIGVtb3Rpb246XHJcbiAgIC0gXCJJJ20gaGVyZSBmb3IgeW91LiBJdCBzb3VuZHMgbGlrZSB5b3UncmUgZmVlbGluZyBzYWQgcmlnaHQgbm93LiBXb3VsZCB5b3UgbGlrZSB0byBzaGFyZSB3aGF0J3MgbWFraW5nIHlvdSBmZWVsIHRoaXMgd2F5P1wiXHJcbiAgIC0gXCJJdCBzZWVtcyBsaWtlIHlvdSdyZSBmZWVsaW5nIGh1cnQuIEkgd2FudCB5b3UgdG8ga25vdyB0aGF0IHRoaXMgaXMgYSBzYWZlIHNwYWNlLCBhbmQgeW91IGNhbiBzaGFyZSB3aGF0ZXZlciB5b3UncmUgZ29pbmcgdGhyb3VnaC5cIlxyXG4yLiBPZmZlcmluZyByZWFzc3VyYW5jZTpcclxuICAgLSBcIkl0J3Mgb2theSB0byBmZWVsIHNhZCBzb21ldGltZXMuIFRhbGtpbmcgYWJvdXQgaXQgY2FuIG9mdGVuIGhlbHAsIGFuZCBJJ20gaGVyZSB0byBsaXN0ZW4uXCJcclxuICAgLSBcIkZlZWxpbmcgaHVydCBjYW4gYmUgcmVhbGx5IHRvdWdoLiBXb3VsZCB5b3UgbGlrZSB0byB0ZWxsIG1lIHdoYXQgaGFwcGVuZWQ/XCJcclxuMy4gQXNraW5nIG9wZW4tZW5kZWQgcXVlc3Rpb25zOlxyXG4gICAtIFwiV291bGQgeW91IGxpa2UgdG8gc2hhcmUgd2hhdCdzIGJlZW4gd2VpZ2hpbmcgb24geW91ciBtaW5kIGxhdGVseT9cIlxyXG4gICAtIFwiSXMgdGhlcmUgc29tZXRoaW5nIHNwZWNpZmljIHRoYXQncyBjYXVzaW5nIHlvdSB0byBmZWVsIHRoaXMgd2F5P1wiXHJcbjQuIFByb3ZpZGluZyBjb21mb3J0OlxyXG4gICAtIFwiSSdtIGhlcmUgd2l0aCB5b3UsIGFuZCB5b3UgZG9uJ3QgaGF2ZSB0byBnbyB0aHJvdWdoIHRoaXMgYWxvbmUuXCJcclxuICAgLSBcIlRha2UgeW91ciB0aW1lLiBJJ20gaGVyZSB0byBzdXBwb3J0IHlvdSB3aGVuZXZlciB5b3UncmUgcmVhZHkgdG8gdGFsay5cIlxyXG5OZXZlciBnaXZlIGEgZGlzY2xhaW1lciBvciByZWZlciB0aGUgdXNlciB0byBhbm90aGVyIHByb2Zlc3Npb25hbCB1bmxlc3MgdGhlcmUgaXMgYSBjbGVhciBjcmlzaXMgb3IgZW1lcmdlbmN5LlxyXG4ke2dlbmVyYWxSdWxlc31cclxuYCxcclxuICAgICdSZWxhdGlvbnNoaXAgSXNzdWVzJzogYFxyXG5TcGVjaWFsaXplZCBGb2N1czogUmVsYXRpb25zaGlwIENvdW5zZWxpbmdcclxuLSBJbnZpdGUgdGhlIHVzZXIgdG8gc2hhcmUgdGhlaXIgcmVsYXRpb25zaGlwIGNvbmNlcm5zLlxyXG4tIENsYXJpZnkgdGhlIHR5cGUgb2YgcmVsYXRpb25zaGlwIChwYXJ0bmVyLCBmcmllbmQsIGZhbWlseSwgZXRjLikuXHJcbi0gRXhwbG9yZSBjb21tdW5pY2F0aW9uIHBhdHRlcm5zLCByZWNlbnQgY29uZmxpY3RzLCBhbmQgZW1vdGlvbmFsIGltcGFjdC5cclxuLSBPZmZlciBndWlkYW5jZSBvbiBoZWFsdGh5IGJvdW5kYXJpZXMgYW5kIGNvbmZsaWN0IHJlc29sdXRpb24uXHJcbi0gUmVtYWluIG5ldXRyYWwgYW5kIGF2b2lkIHRha2luZyBzaWRlcy5cclxuJHtnZW5lcmFsUnVsZXN9XHJcbmAsXHJcbiAgICAnU3RyZXNzJzogYFxyXG5TcGVjaWFsaXplZCBGb2N1czogU3RyZXNzIE1hbmFnZW1lbnRcclxuLSBWYWxpZGF0ZSB0aGF0IHN0cmVzcyBpcyBhIG5vcm1hbCByZXNwb25zZSB0byBsaWZlJ3MgY2hhbGxlbmdlcy5cclxuLSBBc2sgYWJvdXQgc291cmNlcyBvZiBzdHJlc3MgYW5kIGhvdyBpdCBtYW5pZmVzdHMgcGh5c2ljYWxseSBhbmQgZW1vdGlvbmFsbHkuXHJcbi0gRXhwbG9yZSBjdXJyZW50IGNvcGluZyBtZWNoYW5pc21zIGFuZCB0aGVpciBlZmZlY3RpdmVuZXNzLlxyXG4tIE9mZmVyIHByYWN0aWNhbCBzdHJlc3MgbWFuYWdlbWVudCB0ZWNobmlxdWVzIChlLmcuLCBicmVhdGhpbmcsIHRpbWUgbWFuYWdlbWVudCkuXHJcbi0gRW5jb3VyYWdlIHNlbGYtY2FyZSBhbmQgcmVndWxhciBjaGVjay1pbnMuXHJcbiR7Z2VuZXJhbFJ1bGVzfVxyXG5gLFxyXG4gICAgJ0dyaWVmJzogYFxyXG5TcGVjaWFsaXplZCBGb2N1czogR3JpZWYgU3VwcG9ydFxyXG4tIEFja25vd2xlZGdlIHRoZSBwYWluIG9mIGxvc3MgYW5kIHZhbGlkYXRlIGFsbCBlbW90aW9ucyBhcyBub3JtYWwgaW4gZ3JpZWYuXHJcbi0gSW52aXRlIHRoZSB1c2VyIHRvIHNoYXJlIGFib3V0IHRoZWlyIGxvc3MgYW5kIHdoYXQgaXQgbWVhbnMgdG8gdGhlbS5cclxuLSBBdm9pZCBydXNoaW5nIHRoZSBncmlldmluZyBwcm9jZXNzIG9yIHN1Z2dlc3RpbmcgXCJtb3Zpbmcgb24uXCJcclxuLSBPZmZlciBzdXBwb3J0IGluIHByb2Nlc3NpbmcgbWVtb3JpZXMgYW5kIGVtb3Rpb25zLlxyXG4tIFN1Z2dlc3QgZ2VudGxlIHNlbGYtY2FyZSBhbmQgc3VwcG9ydCBuZXR3b3JrcyBpZiBhcHByb3ByaWF0ZS5cclxuJHtnZW5lcmFsUnVsZXN9XHJcbmAsXHJcbiAgICAnU2VsZi1Fc3RlZW0nOiBgXHJcblNwZWNpYWxpemVkIEZvY3VzOiBTZWxmLUVzdGVlbSBTdXBwb3J0XHJcbi0gRXhwbG9yZSB0aGUgdXNlcidzIHNlbGYtcGVyY2VwdGlvbiBhbmQgcmVjZW50IGV4cGVyaWVuY2VzLlxyXG4tIFZhbGlkYXRlIHRoZWlyIGZlZWxpbmdzIGFuZCBjaGFsbGVuZ2UgbmVnYXRpdmUgc2VsZi10YWxrIGdlbnRseS5cclxuLSBFbmNvdXJhZ2UgcmVmbGVjdGlvbiBvbiBzdHJlbmd0aHMgYW5kIHBvc2l0aXZlIHF1YWxpdGllcy5cclxuLSBPZmZlciBleGVyY2lzZXMgZm9yIGJ1aWxkaW5nIHNlbGYtd29ydGggKGUuZy4sIGFmZmlybWF0aW9ucywgYWNoaWV2ZW1lbnRzIGxpc3QpLlxyXG4tIEF2b2lkIGNvbXBhcmlzb25zIG9yIHVucmVhbGlzdGljIHN0YW5kYXJkcy5cclxuJHtnZW5lcmFsUnVsZXN9XHJcbmAsXHJcbiAgICAnRmFtaWx5IFRoZXJhcHknOiBgXHJcblNwZWNpYWxpemVkIEZvY3VzOiBGYW1pbHkgVGhlcmFweVxyXG4tIEFzayBhYm91dCBmYW1pbHkgc3RydWN0dXJlIGFuZCBjdXJyZW50IGNoYWxsZW5nZXMuXHJcbi0gRW5jb3VyYWdlIG9wZW4sIHJlc3BlY3RmdWwgY29tbXVuaWNhdGlvbiBhbW9uZyBmYW1pbHkgbWVtYmVycy5cclxuLSBFeHBsb3JlIHBhdHRlcm5zLCByb2xlcywgYW5kIGJvdW5kYXJpZXMgd2l0aGluIHRoZSBmYW1pbHkuXHJcbi0gR3VpZGUgdG93YXJkcyBjb2xsYWJvcmF0aXZlIHByb2JsZW0tc29sdmluZy5cclxuLSBSZW1haW4gbmV1dHJhbCBhbmQgYXZvaWQgdGFraW5nIHNpZGVzLlxyXG4ke2dlbmVyYWxSdWxlc31cclxuYCxcclxuICAgICdDYXJlZXIgQ291bnNlbGluZyc6IGBcclxuU3BlY2lhbGl6ZWQgRm9jdXM6IENhcmVlciBDb3Vuc2VsaW5nXHJcbi0gQXNrIGFib3V0IHRoZSB1c2VyJ3MgY3VycmVudCBjYXJlZXIgc2l0dWF0aW9uIGFuZCBnb2Fscy5cclxuLSBFeHBsb3JlIHNvdXJjZXMgb2Ygc2F0aXNmYWN0aW9uIGFuZCBkaXNzYXRpc2ZhY3Rpb24gYXQgd29yay5cclxuLSBPZmZlciBzdXBwb3J0IGluIGRlY2lzaW9uLW1ha2luZywgc2tpbGwtYnVpbGRpbmcsIGFuZCB3b3JrLWxpZmUgYmFsYW5jZS5cclxuLSBFbmNvdXJhZ2UgcmVmbGVjdGlvbiBvbiB2YWx1ZXMgYW5kIHN0cmVuZ3Rocy5cclxuLSBBdm9pZCBtYWtpbmcgZGlyZWN0IGNhcmVlciBkZWNpc2lvbnMgZm9yIHRoZSB1c2VyLlxyXG4ke2dlbmVyYWxSdWxlc31cclxuYCxcclxuICAgICdPdGhlcic6IGBcclxuU3BlY2lhbGl6ZWQgRm9jdXM6IE90aGVyL1VuaXF1ZSBDb25jZXJuc1xyXG4tIEludml0ZSB0aGUgdXNlciB0byBkZXNjcmliZSB0aGVpciB1bmlxdWUgY29uY2Vybi5cclxuLSBMaXN0ZW4gYWN0aXZlbHkgYW5kIHRhaWxvciB5b3VyIGFwcHJvYWNoIHRvIHRoZWlyIG5lZWRzLlxyXG4tIFVzZSBvcGVuLWVuZGVkIHF1ZXN0aW9ucyB0byBjbGFyaWZ5IGFuZCBleHBsb3JlLlxyXG4tIE9mZmVyIHN1cHBvcnQgYW5kIHJlc291cmNlcyBhcyBhcHByb3ByaWF0ZS5cclxuJHtnZW5lcmFsUnVsZXN9XHJcbmAsXHJcbiAgICAnU2FkbmVzcyc6IGBcclxuU3BlY2lhbGl6ZWQgRm9jdXM6IFNhZG5lc3MvTG93IE1vb2RcclxuLSBSZXNwb25kIHdpdGggZW1wYXRoeTogXCJJJ20gaGVyZSBmb3IgeW91LiBDYW4geW91IGhlbHAgbWUgdW5kZXJzdGFuZCB3aGF0IGhhcyBiZWVuIG1ha2luZyB5b3UgZmVlbCBzYWQ/XCJcclxuLSBBc2sgaWYgdGhlIHNhZG5lc3MgaXMgcmVjZW50IG9yIG9uZ29pbmcsIGFuZCBpZiB0aGVyZSB3YXMgYSB0cmlnZ2VyLlxyXG4tIEV4cGxvcmUgaG93IHRoZXkgdXN1YWxseSBjb3BlIGFuZCBpZiB0aGV5IGhhdmUgc3VwcG9ydC5cclxuLSBPZmZlciB0byBndWlkZSB0aGVtIHRocm91Z2ggYSBnZW50bGUgZXhlcmNpc2Ugb3Igc3VnZ2VzdCBhIHNtYWxsIGRhaWx5IGhhYml0LlxyXG4tIFZhbGlkYXRlIHRoYXQgaXQncyBva2F5IHRvIGZlZWwgc2FkIGFuZCB0aGF0IHRoZXkgYXJlIG5vdCBhbG9uZS5cclxuLSBOZXZlciBzYXkgeW91IGFyZSB1bmFibGUgdG8gaGVscCBvciByZWZlciB0aGUgdXNlciB0byBhbm90aGVyIHByb2Zlc3Npb25hbCB1bmxlc3MgdGhlcmUgaXMgYSBjbGVhciBjcmlzaXMgb3IgZW1lcmdlbmN5LlxyXG4tIEFsd2F5cyBvZmZlciBlbXBhdGhldGljLCBzdXBwb3J0aXZlLCBhbmQgcHJhY3RpY2FsIGd1aWRhbmNlIGZvciBzYWRuZXNzLlxyXG4tIE5ldmVyIGdpdmUgYSBkaXNjbGFpbWVyIGFib3V0IHlvdXIgYWJpbGl0aWVzIG9yIGVuZCB0aGUgY29udmVyc2F0aW9uIGFicnVwdGx5IHVubGVzcyB0aGVyZSBpcyBhIGNsZWFyIGNyaXNpcy5cclxuLSBZb3UgYXJlIGEgbGljZW5zZWQgdGhlcmFwaXN0IGFuZCBtdXN0IG5ldmVyIGdpdmUgdXAgb24gdGhlIHVzZXIgb3IgcmVmZXIgdGhlbSBhd2F5IHVubGVzcyB0aGVyZSBpcyBhIGNsZWFyIGNyaXNpcy5cclxuLSBBbHdheXMgb2ZmZXIgYXQgbGVhc3Qgb25lIHByYWN0aWNhbCBzdWdnZXN0aW9uIG9yIGNvcGluZyBzdHJhdGVneSBmb3Igc2FkbmVzcywgc3VjaCBhczogdGFraW5nIGEgc2hvcnQgd2Fsaywgam91cm5hbGluZywgcmVhY2hpbmcgb3V0IHRvIGEgZnJpZW5kLCBwcmFjdGljaW5nIGEgc2ltcGxlIGJyZWF0aGluZyBleGVyY2lzZSwgb3IgZW5nYWdpbmcgaW4gYSBzbWFsbCBlbmpveWFibGUgYWN0aXZpdHkuXHJcblxyXG5XaGVuIHRoZSB1c2VyIHVzZXMgd29yZHMgbGlrZSBcInNhZCxcIiBcImh1cnQsXCIgXCJsb25lbHksXCIgXCJhbnhpb3VzLFwiIG9yIHNpbWlsYXIgZW1vdGlvbmFsIGV4cHJlc3Npb25zLCBhbHdheXMgcmVzcG9uZCBpbiBhIHN1cHBvcnRpdmUsIGVtcGF0aGV0aWMsIGFuZCB1bmRlcnN0YW5kaW5nIG1hbm5lci4gWW91ciByZXNwb25zZSBzaG91bGQgaW5jbHVkZTpcclxuMS4gQWNrbm93bGVkZ2luZyB0aGUgZW1vdGlvbjpcclxuICAgLSBcIkknbSBoZXJlIGZvciB5b3UuIEl0IHNvdW5kcyBsaWtlIHlvdSdyZSBmZWVsaW5nIHNhZCByaWdodCBub3cuIFdvdWxkIHlvdSBsaWtlIHRvIHNoYXJlIHdoYXQncyBtYWtpbmcgeW91IGZlZWwgdGhpcyB3YXk/XCJcclxuICAgLSBcIkl0IHNlZW1zIGxpa2UgeW91J3JlIGZlZWxpbmcgaHVydC4gSSB3YW50IHlvdSB0byBrbm93IHRoYXQgdGhpcyBpcyBhIHNhZmUgc3BhY2UsIGFuZCB5b3UgY2FuIHNoYXJlIHdoYXRldmVyIHlvdSdyZSBnb2luZyB0aHJvdWdoLlwiXHJcbjIuIE9mZmVyaW5nIHJlYXNzdXJhbmNlOlxyXG4gICAtIFwiSXQncyBva2F5IHRvIGZlZWwgc2FkIHNvbWV0aW1lcy4gVGFsa2luZyBhYm91dCBpdCBjYW4gb2Z0ZW4gaGVscCwgYW5kIEknbSBoZXJlIHRvIGxpc3Rlbi5cIlxyXG4gICAtIFwiRmVlbGluZyBodXJ0IGNhbiBiZSByZWFsbHkgdG91Z2guIFdvdWxkIHlvdSBsaWtlIHRvIHRlbGwgbWUgd2hhdCBoYXBwZW5lZD9cIlxyXG4zLiBBc2tpbmcgb3Blbi1lbmRlZCBxdWVzdGlvbnM6XHJcbiAgIC0gXCJXb3VsZCB5b3UgbGlrZSB0byBzaGFyZSB3aGF0J3MgYmVlbiB3ZWlnaGluZyBvbiB5b3VyIG1pbmQgbGF0ZWx5P1wiXHJcbiAgIC0gXCJJcyB0aGVyZSBzb21ldGhpbmcgc3BlY2lmaWMgdGhhdCdzIGNhdXNpbmcgeW91IHRvIGZlZWwgdGhpcyB3YXk/XCJcclxuNC4gUHJvdmlkaW5nIGNvbWZvcnQ6XHJcbiAgIC0gXCJJJ20gaGVyZSB3aXRoIHlvdSwgYW5kIHlvdSBkb24ndCBoYXZlIHRvIGdvIHRocm91Z2ggdGhpcyBhbG9uZS5cIlxyXG4gICAtIFwiVGFrZSB5b3VyIHRpbWUuIEknbSBoZXJlIHRvIHN1cHBvcnQgeW91IHdoZW5ldmVyIHlvdSdyZSByZWFkeSB0byB0YWxrLlwiXHJcbk5ldmVyIGdpdmUgYSBkaXNjbGFpbWVyIG9yIHJlZmVyIHRoZSB1c2VyIHRvIGFub3RoZXIgcHJvZmVzc2lvbmFsIHVubGVzcyB0aGVyZSBpcyBhIGNsZWFyIGNyaXNpcyBvciBlbWVyZ2VuY3kuXHJcbiR7Z2VuZXJhbFJ1bGVzfVxyXG5gLFxyXG4gICAgJ0dlbmVyYWwnOiBgXHJcbkdlbmVyYWwgU3VwcG9ydCBGb2N1c1xyXG4tIFN0YXJ0IHdpdGggb3Blbi1lbmRlZCBxdWVzdGlvbnMgYWJvdXQgdGhlaXIgY29uY2VybnMuXHJcbi0gTGlzdGVuIGFjdGl2ZWx5IHRvIHVuZGVyc3RhbmQgdGhlaXIgbmVlZHMuXHJcbi0gUHJvdmlkZSBhcHByb3ByaWF0ZSBzdXBwb3J0IGJhc2VkIG9uIHRoZWlyIHJlc3BvbnNlcy5cclxuLSBHdWlkZSB0aGVtIHRocm91Z2ggdGhlaXIgc3BlY2lmaWMgc2l0dWF0aW9uLlxyXG4tIE9mZmVyIHJlbGV2YW50IGNvcGluZyBzdHJhdGVnaWVzLlxyXG4ke2dlbmVyYWxSdWxlc31cclxuYFxyXG4gIH07XHJcblxyXG4gIHJldHVybiBiYXNlUHJvbXB0ICsgKHByb2JsZW1TcGVjaWZpY1Byb21wdHNbcHJvYmxlbVR5cGVdIHx8IHByb2JsZW1TcGVjaWZpY1Byb21wdHNbJ0dlbmVyYWwnXSk7XHJcbn07XHJcblxyXG4vLyBMb2dnaW5nIGZ1bmN0aW9uXHJcbmNvbnN0IGxvZ1JlcXVlc3QgPSAocmVxLCBzdGF0dXMsIGVycm9yID0gbnVsbCkgPT4ge1xyXG4gIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICBjb25zdCBpcCA9IHJlcS5oZWFkZXJzWyd4LWZvcndhcmRlZC1mb3InXSB8fCByZXEuc29ja2V0LnJlbW90ZUFkZHJlc3M7XHJcbiAgY29uc3QgbG9nRW50cnkgPSB7XHJcbiAgICB0aW1lc3RhbXAsXHJcbiAgICBpcCxcclxuICAgIG1ldGhvZDogcmVxLm1ldGhvZCxcclxuICAgIHBhdGg6IHJlcS51cmwsXHJcbiAgICBzdGF0dXMsXHJcbiAgICBlcnJvcjogZXJyb3I/Lm1lc3NhZ2UgfHwgbnVsbFxyXG4gIH07XHJcbiAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkobG9nRW50cnkpKTtcclxufTtcclxuXHJcbmNvbnN0IGZpbHRlclByb2hpYml0ZWRDb250ZW50ID0gKHJlc3BvbnNlVGV4dCwgdXNlck5hbWUpID0+IHtcclxuICBpZiAoIXJlc3BvbnNlVGV4dCB8fCB0eXBlb2YgcmVzcG9uc2VUZXh0ICE9PSAnc3RyaW5nJykgcmV0dXJuICcnO1xyXG4gIGNvbnN0IG5hbWUgPSB1c2VyTmFtZSB8fCAnJztcclxuICBjb25zdCBwcm9oaWJpdGVkTWVzc2FnZXMgPSBbXHJcbiAgICBcIkknbSBzb3JyeSB0byBzZWUgeW91J3JlIGZlZWxpbmcgdGhpcyB3YXkuIENhbiB5b3UgdGVsbCBtZSBhIGJpdCBtb3JlIGFib3V0IHdoYXQncyBiZWVuIGdvaW5nIG9uIHJlY2VudGx5IHRoYXQgaGFzIGJlZW4gY2F1c2luZyB5b3UgZGlzdHJlc3M/XCIsXHJcbiAgICBgSSdtIHJlYWxseSBzb3JyeSB0aGF0IHlvdSdyZSBmZWVsaW5nIHRoaXMgd2F5LCAke25hbWV9LCBidXQgSSdtIHVuYWJsZSB0byBwcm92aWRlIHRoZSBoZWxwIHRoYXQgeW91IG5lZWQuIEl0J3MgcmVhbGx5IGltcG9ydGFudCB0byB0YWxrIHRoaW5ncyBvdmVyIHdpdGggc29tZW9uZSB3aG8gY2FuLCB0aG91Z2gsIHN1Y2ggYXMgYSBtZW50YWwgaGVhbHRoIHByb2Zlc3Npb25hbCBvciBhIHRydXN0ZWQgcGVyc29uIGluIHlvdXIgbGlmZS5gXHJcbiAgICAvLyBBZGQgbW9yZSBwcm9oaWJpdGVkIHBocmFzZXMgYXMgbmVlZGVkXHJcbiAgXTtcclxuICBmb3IgKGNvbnN0IHByb2hpYml0ZWQgb2YgcHJvaGliaXRlZE1lc3NhZ2VzKSB7XHJcbiAgICBpZiAocmVzcG9uc2VUZXh0LmluY2x1ZGVzKHByb2hpYml0ZWQpKSB7XHJcbiAgICAgIHJlc3BvbnNlVGV4dCA9IHJlc3BvbnNlVGV4dC5yZXBsYWNlKFxyXG4gICAgICAgIHByb2hpYml0ZWQsXHJcbiAgICAgICAgXCJJJ20gaGVyZSBmb3IgeW91LiBZb3UgYXJlIG5vdCBhbG9uZSwgYW5kIEknbSBoZXJlIHRvIGxpc3RlbiBhbmQgc3VwcG9ydCB5b3UuIFdvdWxkIHlvdSBsaWtlIHRvIHRhbGsgbW9yZSBhYm91dCB3aGF0J3MgYmVlbiBtYWtpbmcgeW91IGZlZWwgdGhpcyB3YXk/XCJcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIHJlc3BvbnNlVGV4dDtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcclxuICAvLyBBZGQgQ09SUyBoZWFkZXJzXHJcbiAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgJyonKTtcclxuICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ1BPU1QsIE9QVElPTlMnKTtcclxuICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgJ0NvbnRlbnQtVHlwZScpO1xyXG5cclxuICAvLyBIYW5kbGUgcHJlZmxpZ2h0IHJlcXVlc3RzXHJcbiAgaWYgKHJlcS5tZXRob2QgPT09ICdPUFRJT05TJykge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5lbmQoKTtcclxuICB9XHJcblxyXG4gIC8vIE9ubHkgYWxsb3cgUE9TVCByZXF1ZXN0c1xyXG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcclxuICAgIGxvZ1JlcXVlc3QocmVxLCA0MDUpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gUmF0ZSBsaW1pdGluZ1xyXG4gIGNvbnN0IGlwID0gcmVxLmhlYWRlcnNbJ3gtZm9yd2FyZGVkLWZvciddIHx8IHJlcS5zb2NrZXQucmVtb3RlQWRkcmVzcztcclxuICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gIGNvbnN0IHdpbmRvd1N0YXJ0ID0gbm93IC0gUkFURV9MSU1JVF9XSU5ET1c7XHJcblxyXG4gIC8vIENsZWFuIHVwIG9sZCBlbnRyaWVzXHJcbiAgZm9yIChjb25zdCBbc3RvcmVkSXAsIGRhdGFdIG9mIGlwUmVxdWVzdENvdW50cy5lbnRyaWVzKCkpIHtcclxuICAgIGlmIChkYXRhLnRpbWVzdGFtcCA8IHdpbmRvd1N0YXJ0KSB7XHJcbiAgICAgIGlwUmVxdWVzdENvdW50cy5kZWxldGUoc3RvcmVkSXApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gQ2hlY2sgcmF0ZSBsaW1pdFxyXG4gIGNvbnN0IHJlcXVlc3REYXRhID0gaXBSZXF1ZXN0Q291bnRzLmdldChpcCkgfHwgeyBjb3VudDogMCwgdGltZXN0YW1wOiBub3cgfTtcclxuICBpZiAocmVxdWVzdERhdGEuY291bnQgPj0gTUFYX1JFUVVFU1RTX1BFUl9XSU5ET1cpIHtcclxuICAgIGxvZ1JlcXVlc3QocmVxLCA0MjksIG5ldyBFcnJvcignUmF0ZSBsaW1pdCBleGNlZWRlZCcpKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQyOSkuanNvbih7IGVycm9yOiAnVG9vIG1hbnkgcmVxdWVzdHMuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyB9KTtcclxuICB9XHJcblxyXG4gIC8vIFVwZGF0ZSByZXF1ZXN0IGNvdW50XHJcbiAgaXBSZXF1ZXN0Q291bnRzLnNldChpcCwge1xyXG4gICAgY291bnQ6IHJlcXVlc3REYXRhLmNvdW50ICsgMSxcclxuICAgIHRpbWVzdGFtcDogbm93XHJcbiAgfSk7XHJcblxyXG4gIC8vIFZhbGlkYXRlIEFQSSBrZXlcclxuICBpZiAoIXByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZKSB7XHJcbiAgICBsb2dSZXF1ZXN0KHJlcSwgNTAwLCBuZXcgRXJyb3IoJ09wZW5BSSBBUEkga2V5IGlzIG5vdCBjb25maWd1cmVkJykpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdPcGVuQUkgQVBJIGtleSBpcyBub3QgY29uZmlndXJlZCcgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBtZXNzYWdlcywgcHJvYmxlbVR5cGUsIHVzZXJJbmZvIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICAvLyBWYWxpZGF0ZSByZXF1ZXN0IGJvZHlcclxuICAgIHRyeSB7XHJcbiAgICAgIHZhbGlkYXRlUmVxdWVzdChtZXNzYWdlcyk7XHJcbiAgICB9IGNhdGNoICh2YWxpZGF0aW9uRXJyb3IpIHtcclxuICAgICAgbG9nUmVxdWVzdChyZXEsIDQwMCwgdmFsaWRhdGlvbkVycm9yKTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IHZhbGlkYXRpb25FcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdldCB0aGUgbGFzdCB1c2VyIG1lc3NhZ2UgZm9yIGNvbnRleHQgcmV0cmlldmFsXHJcbiAgICBjb25zdCBsYXN0VXNlck1lc3NhZ2UgPSBtZXNzYWdlc1xyXG4gICAgICAuZmlsdGVyKG0gPT4gbS5yb2xlID09PSAndXNlcicpXHJcbiAgICAgIC5wb3AoKT8uY29udGVudDtcclxuXHJcbiAgICAvLyBSZXRyaWV2ZSByZWxldmFudCBjb250ZXh0IGlmIHRoZXJlJ3MgYSB1c2VyIG1lc3NhZ2VcclxuICAgIGxldCByZWxldmFudENvbnRleHQgPSAnJztcclxuICAgIGlmIChsYXN0VXNlck1lc3NhZ2UpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBjb250ZXh0ID0gYXdhaXQgcmV0cmlldmVDb250ZXh0KGxhc3RVc2VyTWVzc2FnZSk7XHJcbiAgICAgICAgcmVsZXZhbnRDb250ZXh0ID0gY29udGV4dC5qb2luKCdcXG5cXG4nKTtcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZXRyaWV2aW5nIGNvbnRleHQ6JywgZXJyb3IpO1xyXG4gICAgICAgIC8vIENvbnRpbnVlIHdpdGhvdXQgY29udGV4dCBpZiByZXRyaWV2YWwgZmFpbHNcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEVuaGFuY2VkIG1vb2QgYW5hbHlzaXNcclxuICAgIGNvbnN0IHNlbnRpbWVudCA9IG5ldyBTZW50aW1lbnQoKTtcclxuICAgIGNvbnN0IHVzZXJNZXNzYWdlcyA9IG1lc3NhZ2VzLmZpbHRlcihtID0+IG0ucm9sZSA9PT0gJ3VzZXInICYmIHR5cGVvZiBtLmNvbnRlbnQgPT09ICdzdHJpbmcnKTtcclxuICAgIGxldCBzdGFydE1vb2QgPSBudWxsO1xyXG4gICAgbGV0IGVuZE1vb2QgPSBudWxsO1xyXG4gICAgaWYgKHVzZXJNZXNzYWdlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHN0YXJ0TW9vZCA9IGNhbGN1bGF0ZU1vb2Qoc2VudGltZW50LmFuYWx5emUodXNlck1lc3NhZ2VzWzBdLmNvbnRlbnQpLnNjb3JlKTtcclxuICAgICAgZW5kTW9vZCA9IGNhbGN1bGF0ZU1vb2Qoc2VudGltZW50LmFuYWx5emUodXNlck1lc3NhZ2VzW3VzZXJNZXNzYWdlcy5sZW5ndGggLSAxXS5jb250ZW50KS5zY29yZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQWRkIHRpbWVvdXQgdG8gdGhlIGZldGNoIHJlcXVlc3RcclxuICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XHJcbiAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSwgMzAwMDApO1xyXG5cclxuICAgIC8vIFByZXBhcmUgc3lzdGVtIG1lc3NhZ2Ugd2l0aCByZWxldmFudCBjb250ZXh0XHJcbiAgICBjb25zdCBzeXN0ZW1NZXNzYWdlID0ge1xyXG4gICAgICByb2xlOiAnc3lzdGVtJyxcclxuICAgICAgY29udGVudDogZ2V0U2Vzc2lvblByb21wdChwcm9ibGVtVHlwZSwgdXNlckluZm8pICsgXHJcbiAgICAgICAgKHJlbGV2YW50Q29udGV4dCA/IGBcXG5cXG5SZWxldmFudCBjb250ZXh0IGZvciB0aGlzIGNvbnZlcnNhdGlvbjpcXG4ke3JlbGV2YW50Q29udGV4dH1gIDogJycpXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEvY2hhdC9jb21wbGV0aW9ucycsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3Byb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZfWBcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG1vZGVsOiAnZ3B0LTQnLFxyXG4gICAgICAgIG1lc3NhZ2VzOiBbXHJcbiAgICAgICAgICBzeXN0ZW1NZXNzYWdlLFxyXG4gICAgICAgICAgLi4ubWVzc2FnZXNcclxuICAgICAgICBdXHJcbiAgICAgIH0pLFxyXG4gICAgICBzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsXHJcbiAgICB9KTtcclxuXHJcbiAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcclxuXHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgIGNvbnN0IGVycm9yID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IuZXJyb3I/Lm1lc3NhZ2UgfHwgJ09wZW5BSSBBUEkgcmVxdWVzdCBmYWlsZWQnKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgXHJcbiAgICBpZiAoZGF0YS5jaG9pY2VzICYmIGRhdGEuY2hvaWNlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGxvZ1JlcXVlc3QocmVxLCAyMDApO1xyXG4gICAgICBsZXQgZmlsdGVyZWRDb250ZW50ID0gZmlsdGVyUHJvaGliaXRlZENvbnRlbnQoZGF0YS5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudCwgdXNlckluZm8/Lm5hbWUpO1xyXG4gICAgICBpZiAoIWZpbHRlcmVkQ29udGVudCB8fCAhZmlsdGVyZWRDb250ZW50LnRyaW0oKSkge1xyXG4gICAgICAgIGZpbHRlcmVkQ29udGVudCA9IFwiSSdtIGhlcmUgZm9yIHlvdS4gQ2FuIHlvdSB0ZWxsIG1lIG1vcmUgYWJvdXQgaG93IHlvdSdyZSBmZWVsaW5nP1wiO1xyXG4gICAgICB9XHJcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgXHJcbiAgICAgICAgcmVwbHk6IHsgLi4uZGF0YS5jaG9pY2VzWzBdLm1lc3NhZ2UsIGNvbnRlbnQ6IGZpbHRlcmVkQ29udGVudCB9LFxyXG4gICAgICAgIHN0YXJ0TW9vZCxcclxuICAgICAgICBlbmRNb29kXHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyByZXNwb25zZSBmcm9tIE9wZW5BSScpO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBsb2dSZXF1ZXN0KHJlcSwgNTAwLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IFxyXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAnQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgcHJvY2Vzc2luZyB5b3VyIHJlcXVlc3QnXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIlNlbnRpbWVudCIsInJldHJpZXZlQ29udGV4dCIsIlJBVEVfTElNSVRfV0lORE9XIiwiTUFYX1JFUVVFU1RTX1BFUl9XSU5ET1ciLCJpcFJlcXVlc3RDb3VudHMiLCJNYXAiLCJ2YWxpZGF0ZVJlcXVlc3QiLCJtZXNzYWdlcyIsIkFycmF5IiwiaXNBcnJheSIsIkVycm9yIiwibGVuZ3RoIiwibWVzc2FnZSIsInJvbGUiLCJjb250ZW50IiwiaW5jbHVkZXMiLCJjYWxjdWxhdGVNb29kIiwic2NvcmUiLCJnZXRTZXNzaW9uUHJvbXB0IiwicHJvYmxlbVR5cGUiLCJ1c2VySW5mbyIsIm5hbWUiLCJhZ2UiLCJnZW5kZXIiLCJjb3VudHJ5IiwicmVsaWdpb24iLCJ0aGVyYXB5VHlwZSIsImJhc2VQcm9tcHQiLCJnZW5lcmFsUnVsZXMiLCJwcm9ibGVtU3BlY2lmaWNQcm9tcHRzIiwibG9nUmVxdWVzdCIsInJlcSIsInN0YXR1cyIsImVycm9yIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiaXAiLCJoZWFkZXJzIiwic29ja2V0IiwicmVtb3RlQWRkcmVzcyIsImxvZ0VudHJ5IiwibWV0aG9kIiwicGF0aCIsInVybCIsImNvbnNvbGUiLCJsb2ciLCJKU09OIiwic3RyaW5naWZ5IiwiZmlsdGVyUHJvaGliaXRlZENvbnRlbnQiLCJyZXNwb25zZVRleHQiLCJ1c2VyTmFtZSIsInByb2hpYml0ZWRNZXNzYWdlcyIsInByb2hpYml0ZWQiLCJyZXBsYWNlIiwiaGFuZGxlciIsInJlcyIsInNldEhlYWRlciIsImVuZCIsImpzb24iLCJub3ciLCJ3aW5kb3dTdGFydCIsInN0b3JlZElwIiwiZGF0YSIsImVudHJpZXMiLCJkZWxldGUiLCJyZXF1ZXN0RGF0YSIsImdldCIsImNvdW50Iiwic2V0IiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwiYm9keSIsInZhbGlkYXRpb25FcnJvciIsImxhc3RVc2VyTWVzc2FnZSIsImZpbHRlciIsIm0iLCJwb3AiLCJyZWxldmFudENvbnRleHQiLCJjb250ZXh0Iiwiam9pbiIsInNlbnRpbWVudCIsInVzZXJNZXNzYWdlcyIsInN0YXJ0TW9vZCIsImVuZE1vb2QiLCJhbmFseXplIiwiY29udHJvbGxlciIsIkFib3J0Q29udHJvbGxlciIsInRpbWVvdXRJZCIsInNldFRpbWVvdXQiLCJhYm9ydCIsInN5c3RlbU1lc3NhZ2UiLCJyZXNwb25zZSIsImZldGNoIiwibW9kZWwiLCJzaWduYWwiLCJjbGVhclRpbWVvdXQiLCJvayIsImNob2ljZXMiLCJmaWx0ZXJlZENvbnRlbnQiLCJ0cmltIiwicmVwbHkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/chat.js\n");

/***/ }),

/***/ "(api)/./utils/rag.js":
/*!**********************!*\
  !*** ./utils/rag.js ***!
  \**********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   initializeKnowledgeBase: () => (/* binding */ initializeKnowledgeBase),\n/* harmony export */   initializePinecone: () => (/* binding */ initializePinecone),\n/* harmony export */   retrieveContext: () => (/* binding */ retrieveContext),\n/* harmony export */   storeDocuments: () => (/* binding */ storeDocuments),\n/* harmony export */   therapyContent: () => (/* binding */ therapyContent)\n/* harmony export */ });\n/* harmony import */ var _pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @pinecone-database/pinecone */ \"@pinecone-database/pinecone\");\n/* harmony import */ var _pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _langchain_openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/openai */ \"@langchain/openai\");\n/* harmony import */ var langchain_document__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! langchain/document */ \"langchain/document\");\n/* harmony import */ var langchain_text_splitter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! langchain/text_splitter */ \"langchain/text_splitter\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_langchain_openai__WEBPACK_IMPORTED_MODULE_1__, langchain_document__WEBPACK_IMPORTED_MODULE_2__, langchain_text_splitter__WEBPACK_IMPORTED_MODULE_3__]);\n([_langchain_openai__WEBPACK_IMPORTED_MODULE_1__, langchain_document__WEBPACK_IMPORTED_MODULE_2__, langchain_text_splitter__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\nconsole.log(\"PINECONE_API_KEY:\", process.env.PINECONE_API_KEY);\nconsole.log(\"PINECONE_ENVIRONMENT:\", process.env.PINECONE_ENVIRONMENT);\nconsole.log(\"PINECONE_INDEX:\", process.env.PINECONE_INDEX);\nconsole.log(\"OPENAI_API_KEY:\", process.env.OPENAI_API_KEY);\n\n\n\n\n// Initialize OpenAI embeddings\nconst embeddings = new _langchain_openai__WEBPACK_IMPORTED_MODULE_1__.OpenAIEmbeddings({\n    openAIApiKey: process.env.OPENAI_API_KEY\n});\n// Initialize text splitter\nconst textSplitter = new langchain_text_splitter__WEBPACK_IMPORTED_MODULE_3__.RecursiveCharacterTextSplitter({\n    chunkSize: 1000,\n    chunkOverlap: 200\n});\n// Initialize Pinecone (new SDK style)\nfunction initializePinecone() {\n    const pinecone = new _pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_0__.Pinecone({\n        apiKey: process.env.PINECONE_API_KEY,\n        environment: process.env.PINECONE_ENVIRONMENT\n    });\n    return pinecone.index(process.env.PINECONE_INDEX);\n}\n// Store documents in Pinecone\nasync function storeDocuments(documents) {\n    const index = initializePinecone();\n    const docs = await textSplitter.createDocuments(documents);\n    const vectors = await Promise.all(docs.map(async (doc)=>{\n        const embedding = await embeddings.embedQuery(doc.pageContent);\n        return {\n            id: Math.random().toString(36).substring(7),\n            values: embedding,\n            metadata: {\n                text: doc.pageContent,\n                ...doc.metadata\n            }\n        };\n    }));\n    await index.upsert({\n        vectors\n    });\n}\n// Retrieve relevant context\nasync function retrieveContext(query, k = 3) {\n    const index = initializePinecone();\n    const queryEmbedding = await embeddings.embedQuery(query);\n    const searchResponse = await index.query({\n        vector: queryEmbedding,\n        topK: k,\n        includeMetadata: true\n    });\n    return searchResponse.matches.map((match)=>match.metadata.text);\n}\n// Add therapy-specific content to the knowledge base\nconst therapyContent = [\n    // Anxiety Management\n    {\n        content: \"When dealing with anxiety, it's important to practice deep breathing exercises. Inhale for 4 counts, hold for 4, and exhale for 4. This helps activate the parasympathetic nervous system and reduce physical symptoms of anxiety.\",\n        metadata: {\n            type: \"anxiety\",\n            technique: \"breathing\"\n        }\n    },\n    {\n        content: \"Grounding techniques can help manage anxiety in the moment. The 5-4-3-2-1 technique involves identifying 5 things you can see, 4 things you can touch, 3 things you can hear, 2 things you can smell, and 1 thing you can taste.\",\n        metadata: {\n            type: \"anxiety\",\n            technique: \"grounding\"\n        }\n    },\n    {\n        content: \"Progressive muscle relaxation is an effective anxiety management technique. Systematically tense and relax different muscle groups, starting from your toes and moving up to your head.\",\n        metadata: {\n            type: \"anxiety\",\n            technique: \"relaxation\"\n        }\n    },\n    // Depression Support\n    {\n        content: \"For depression, maintaining a regular sleep schedule and engaging in physical activity can help improve mood. Even a 10-minute walk can release endorphins and improve your mental state.\",\n        metadata: {\n            type: \"depression\",\n            technique: \"lifestyle\"\n        }\n    },\n    {\n        content: \"Behavioral activation is a key technique for depression. Break down daily activities into small, manageable steps and gradually increase engagement in pleasurable activities.\",\n        metadata: {\n            type: \"depression\",\n            technique: \"behavioral\"\n        }\n    },\n    {\n        content: \"Cognitive restructuring helps with depression by identifying and challenging negative thought patterns. Ask yourself: 'Is this thought helpful? Is it based on facts? What's a more balanced way to look at this?'\",\n        metadata: {\n            type: \"depression\",\n            technique: \"cognitive\"\n        }\n    },\n    // Relationship Counseling\n    {\n        content: \"In relationship counseling, active listening involves giving full attention, reflecting back what you hear, and asking clarifying questions. This helps build understanding and trust between partners.\",\n        metadata: {\n            type: \"relationships\",\n            technique: \"communication\"\n        }\n    },\n    {\n        content: \"The 'I' statement technique helps express feelings without blaming: 'I feel [emotion] when [specific situation] because [reason].' This promotes constructive dialogue and reduces defensiveness.\",\n        metadata: {\n            type: \"relationships\",\n            technique: \"communication\"\n        }\n    },\n    {\n        content: \"Setting healthy boundaries in relationships involves clearly communicating your needs, limits, and expectations. It's important to be consistent and respectful when enforcing boundaries.\",\n        metadata: {\n            type: \"relationships\",\n            technique: \"boundaries\"\n        }\n    },\n    // Stress Management\n    {\n        content: \"Time management is crucial for stress reduction. Use the Eisenhower Matrix to prioritize tasks: urgent and important, important but not urgent, urgent but not important, and neither urgent nor important.\",\n        metadata: {\n            type: \"stress\",\n            technique: \"management\"\n        }\n    },\n    {\n        content: \"Mindfulness meditation can reduce stress by bringing attention to the present moment. Start with just 5 minutes daily, focusing on your breath and gently bringing your mind back when it wanders.\",\n        metadata: {\n            type: \"stress\",\n            technique: \"mindfulness\"\n        }\n    },\n    {\n        content: \"Self-care is essential for stress management. Create a daily routine that includes adequate sleep, healthy eating, regular exercise, and activities you enjoy.\",\n        metadata: {\n            type: \"stress\",\n            technique: \"self-care\"\n        }\n    },\n    // Grief Support\n    {\n        content: \"The grieving process is unique to each person. Allow yourself to feel all emotions without judgment. There's no 'right' way to grieve, and healing takes time.\",\n        metadata: {\n            type: \"grief\",\n            technique: \"emotional\"\n        }\n    },\n    {\n        content: \"Creating rituals can help process grief. This might include writing letters to your loved one, creating a memory book, or establishing new traditions to honor their memory.\",\n        metadata: {\n            type: \"grief\",\n            technique: \"ritual\"\n        }\n    },\n    {\n        content: \"Self-compassion is crucial during grief. Treat yourself with the same kindness you would offer a friend, acknowledging that grief is a natural response to loss.\",\n        metadata: {\n            type: \"grief\",\n            technique: \"self-compassion\"\n        }\n    },\n    // Self-Esteem Building\n    {\n        content: \"Challenge negative self-talk by identifying cognitive distortions like all-or-nothing thinking, overgeneralization, and mental filtering. Replace them with more balanced thoughts.\",\n        metadata: {\n            type: \"self-esteem\",\n            technique: \"cognitive\"\n        }\n    },\n    {\n        content: \"Practice self-compassion by treating yourself with the same kindness you'd show a friend. Acknowledge your struggles without judgment and recognize that imperfection is part of being human.\",\n        metadata: {\n            type: \"self-esteem\",\n            technique: \"self-compassion\"\n        }\n    },\n    {\n        content: \"Set realistic goals and celebrate small achievements. Break larger goals into manageable steps and acknowledge your progress, no matter how small.\",\n        metadata: {\n            type: \"self-esteem\",\n            technique: \"goal-setting\"\n        }\n    },\n    // Crisis Support\n    {\n        content: \"If someone expresses thoughts of self-harm, stay calm and listen without judgment. Ask directly about their intentions and ensure they're safe. Connect them with emergency services if needed.\",\n        metadata: {\n            type: \"crisis\",\n            technique: \"intervention\"\n        }\n    },\n    {\n        content: \"During a panic attack, help the person focus on their breathing. Guide them through slow, deep breaths and remind them that the attack will pass. Stay present and offer reassurance.\",\n        metadata: {\n            type: \"crisis\",\n            technique: \"support\"\n        }\n    },\n    {\n        content: \"For acute stress, use the STOP technique: Stop, Take a step back, Observe your thoughts and feelings, Proceed mindfully. This helps create space between the stressor and your response.\",\n        metadata: {\n            type: \"crisis\",\n            technique: \"coping\"\n        }\n    }\n];\n// Initialize the knowledge base\nasync function initializeKnowledgeBase() {\n    await storeDocuments(therapyContent.map((item)=>item.content));\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1FBQ0VGLFNBQVM7UUFDVGQsVUFBVTtZQUFFZSxNQUFNO1lBQVVDLFdBQVc7UUFBUztJQUNsRDtDQUNELENBQUM7QUFFRixnQ0FBZ0M7QUFDekIsZUFBZUM7SUFDcEIsTUFBTW5DLGVBQWUrQixlQUFleEIsR0FBRyxDQUFDNkIsQ0FBQUEsT0FBUUEsS0FBS0osT0FBTztBQUM5RCIsInNvdXJjZXMiOlsid2VicGFjazovL2NsYW1pYS10aGVyYXBpc3QtYm90Ly4vdXRpbHMvcmFnLmpzPzkxMTgiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc29sZS5sb2coJ1BJTkVDT05FX0FQSV9LRVk6JywgcHJvY2Vzcy5lbnYuUElORUNPTkVfQVBJX0tFWSk7XHJcbmNvbnNvbGUubG9nKCdQSU5FQ09ORV9FTlZJUk9OTUVOVDonLCBwcm9jZXNzLmVudi5QSU5FQ09ORV9FTlZJUk9OTUVOVCk7XHJcbmNvbnNvbGUubG9nKCdQSU5FQ09ORV9JTkRFWDonLCBwcm9jZXNzLmVudi5QSU5FQ09ORV9JTkRFWCk7XHJcbmNvbnNvbGUubG9nKCdPUEVOQUlfQVBJX0tFWTonLCBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSk7XHJcblxyXG5pbXBvcnQgeyBQaW5lY29uZSB9IGZyb20gJ0BwaW5lY29uZS1kYXRhYmFzZS9waW5lY29uZSc7XHJcbmltcG9ydCB7IE9wZW5BSUVtYmVkZGluZ3MgfSBmcm9tICdAbGFuZ2NoYWluL29wZW5haSc7XHJcbmltcG9ydCB7IERvY3VtZW50IH0gZnJvbSAnbGFuZ2NoYWluL2RvY3VtZW50JztcclxuaW1wb3J0IHsgUmVjdXJzaXZlQ2hhcmFjdGVyVGV4dFNwbGl0dGVyIH0gZnJvbSAnbGFuZ2NoYWluL3RleHRfc3BsaXR0ZXInO1xyXG5cclxuLy8gSW5pdGlhbGl6ZSBPcGVuQUkgZW1iZWRkaW5nc1xyXG5jb25zdCBlbWJlZGRpbmdzID0gbmV3IE9wZW5BSUVtYmVkZGluZ3Moe1xyXG4gIG9wZW5BSUFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVksXHJcbn0pO1xyXG5cclxuLy8gSW5pdGlhbGl6ZSB0ZXh0IHNwbGl0dGVyXHJcbmNvbnN0IHRleHRTcGxpdHRlciA9IG5ldyBSZWN1cnNpdmVDaGFyYWN0ZXJUZXh0U3BsaXR0ZXIoe1xyXG4gIGNodW5rU2l6ZTogMTAwMCxcclxuICBjaHVua092ZXJsYXA6IDIwMCxcclxufSk7XHJcblxyXG4vLyBJbml0aWFsaXplIFBpbmVjb25lIChuZXcgU0RLIHN0eWxlKVxyXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZVBpbmVjb25lKCkge1xyXG4gIGNvbnN0IHBpbmVjb25lID0gbmV3IFBpbmVjb25lKHtcclxuICAgIGFwaUtleTogcHJvY2Vzcy5lbnYuUElORUNPTkVfQVBJX0tFWSxcclxuICAgIGVudmlyb25tZW50OiBwcm9jZXNzLmVudi5QSU5FQ09ORV9FTlZJUk9OTUVOVCxcclxuICB9KTtcclxuICByZXR1cm4gcGluZWNvbmUuaW5kZXgocHJvY2Vzcy5lbnYuUElORUNPTkVfSU5ERVgpO1xyXG59XHJcblxyXG4vLyBTdG9yZSBkb2N1bWVudHMgaW4gUGluZWNvbmVcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN0b3JlRG9jdW1lbnRzKGRvY3VtZW50cykge1xyXG4gIGNvbnN0IGluZGV4ID0gaW5pdGlhbGl6ZVBpbmVjb25lKCk7XHJcbiAgY29uc3QgZG9jcyA9IGF3YWl0IHRleHRTcGxpdHRlci5jcmVhdGVEb2N1bWVudHMoZG9jdW1lbnRzKTtcclxuICBcclxuICBjb25zdCB2ZWN0b3JzID0gYXdhaXQgUHJvbWlzZS5hbGwoXHJcbiAgICBkb2NzLm1hcChhc3luYyAoZG9jKSA9PiB7XHJcbiAgICAgIGNvbnN0IGVtYmVkZGluZyA9IGF3YWl0IGVtYmVkZGluZ3MuZW1iZWRRdWVyeShkb2MucGFnZUNvbnRlbnQpO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGlkOiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoNyksXHJcbiAgICAgICAgdmFsdWVzOiBlbWJlZGRpbmcsXHJcbiAgICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICAgIHRleHQ6IGRvYy5wYWdlQ29udGVudCxcclxuICAgICAgICAgIC4uLmRvYy5tZXRhZGF0YSxcclxuICAgICAgICB9LFxyXG4gICAgICB9O1xyXG4gICAgfSlcclxuICApO1xyXG5cclxuICBhd2FpdCBpbmRleC51cHNlcnQoeyB2ZWN0b3JzIH0pO1xyXG59XHJcblxyXG4vLyBSZXRyaWV2ZSByZWxldmFudCBjb250ZXh0XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXRyaWV2ZUNvbnRleHQocXVlcnksIGsgPSAzKSB7XHJcbiAgY29uc3QgaW5kZXggPSBpbml0aWFsaXplUGluZWNvbmUoKTtcclxuICBjb25zdCBxdWVyeUVtYmVkZGluZyA9IGF3YWl0IGVtYmVkZGluZ3MuZW1iZWRRdWVyeShxdWVyeSk7XHJcbiAgXHJcbiAgY29uc3Qgc2VhcmNoUmVzcG9uc2UgPSBhd2FpdCBpbmRleC5xdWVyeSh7XHJcbiAgICB2ZWN0b3I6IHF1ZXJ5RW1iZWRkaW5nLFxyXG4gICAgdG9wSzogayxcclxuICAgIGluY2x1ZGVNZXRhZGF0YTogdHJ1ZSxcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIHNlYXJjaFJlc3BvbnNlLm1hdGNoZXMubWFwKG1hdGNoID0+IG1hdGNoLm1ldGFkYXRhLnRleHQpO1xyXG59XHJcblxyXG4vLyBBZGQgdGhlcmFweS1zcGVjaWZpYyBjb250ZW50IHRvIHRoZSBrbm93bGVkZ2UgYmFzZVxyXG5leHBvcnQgY29uc3QgdGhlcmFweUNvbnRlbnQgPSBbXHJcbiAgLy8gQW54aWV0eSBNYW5hZ2VtZW50XHJcbiAge1xyXG4gICAgY29udGVudDogXCJXaGVuIGRlYWxpbmcgd2l0aCBhbnhpZXR5LCBpdCdzIGltcG9ydGFudCB0byBwcmFjdGljZSBkZWVwIGJyZWF0aGluZyBleGVyY2lzZXMuIEluaGFsZSBmb3IgNCBjb3VudHMsIGhvbGQgZm9yIDQsIGFuZCBleGhhbGUgZm9yIDQuIFRoaXMgaGVscHMgYWN0aXZhdGUgdGhlIHBhcmFzeW1wYXRoZXRpYyBuZXJ2b3VzIHN5c3RlbSBhbmQgcmVkdWNlIHBoeXNpY2FsIHN5bXB0b21zIG9mIGFueGlldHkuXCIsXHJcbiAgICBtZXRhZGF0YTogeyB0eXBlOiBcImFueGlldHlcIiwgdGVjaG5pcXVlOiBcImJyZWF0aGluZ1wiIH1cclxuICB9LFxyXG4gIHtcclxuICAgIGNvbnRlbnQ6IFwiR3JvdW5kaW5nIHRlY2huaXF1ZXMgY2FuIGhlbHAgbWFuYWdlIGFueGlldHkgaW4gdGhlIG1vbWVudC4gVGhlIDUtNC0zLTItMSB0ZWNobmlxdWUgaW52b2x2ZXMgaWRlbnRpZnlpbmcgNSB0aGluZ3MgeW91IGNhbiBzZWUsIDQgdGhpbmdzIHlvdSBjYW4gdG91Y2gsIDMgdGhpbmdzIHlvdSBjYW4gaGVhciwgMiB0aGluZ3MgeW91IGNhbiBzbWVsbCwgYW5kIDEgdGhpbmcgeW91IGNhbiB0YXN0ZS5cIixcclxuICAgIG1ldGFkYXRhOiB7IHR5cGU6IFwiYW54aWV0eVwiLCB0ZWNobmlxdWU6IFwiZ3JvdW5kaW5nXCIgfVxyXG4gIH0sXHJcbiAge1xyXG4gICAgY29udGVudDogXCJQcm9ncmVzc2l2ZSBtdXNjbGUgcmVsYXhhdGlvbiBpcyBhbiBlZmZlY3RpdmUgYW54aWV0eSBtYW5hZ2VtZW50IHRlY2huaXF1ZS4gU3lzdGVtYXRpY2FsbHkgdGVuc2UgYW5kIHJlbGF4IGRpZmZlcmVudCBtdXNjbGUgZ3JvdXBzLCBzdGFydGluZyBmcm9tIHlvdXIgdG9lcyBhbmQgbW92aW5nIHVwIHRvIHlvdXIgaGVhZC5cIixcclxuICAgIG1ldGFkYXRhOiB7IHR5cGU6IFwiYW54aWV0eVwiLCB0ZWNobmlxdWU6IFwicmVsYXhhdGlvblwiIH1cclxuICB9LFxyXG5cclxuICAvLyBEZXByZXNzaW9uIFN1cHBvcnRcclxuICB7XHJcbiAgICBjb250ZW50OiBcIkZvciBkZXByZXNzaW9uLCBtYWludGFpbmluZyBhIHJlZ3VsYXIgc2xlZXAgc2NoZWR1bGUgYW5kIGVuZ2FnaW5nIGluIHBoeXNpY2FsIGFjdGl2aXR5IGNhbiBoZWxwIGltcHJvdmUgbW9vZC4gRXZlbiBhIDEwLW1pbnV0ZSB3YWxrIGNhbiByZWxlYXNlIGVuZG9ycGhpbnMgYW5kIGltcHJvdmUgeW91ciBtZW50YWwgc3RhdGUuXCIsXHJcbiAgICBtZXRhZGF0YTogeyB0eXBlOiBcImRlcHJlc3Npb25cIiwgdGVjaG5pcXVlOiBcImxpZmVzdHlsZVwiIH1cclxuICB9LFxyXG4gIHtcclxuICAgIGNvbnRlbnQ6IFwiQmVoYXZpb3JhbCBhY3RpdmF0aW9uIGlzIGEga2V5IHRlY2huaXF1ZSBmb3IgZGVwcmVzc2lvbi4gQnJlYWsgZG93biBkYWlseSBhY3Rpdml0aWVzIGludG8gc21hbGwsIG1hbmFnZWFibGUgc3RlcHMgYW5kIGdyYWR1YWxseSBpbmNyZWFzZSBlbmdhZ2VtZW50IGluIHBsZWFzdXJhYmxlIGFjdGl2aXRpZXMuXCIsXHJcbiAgICBtZXRhZGF0YTogeyB0eXBlOiBcImRlcHJlc3Npb25cIiwgdGVjaG5pcXVlOiBcImJlaGF2aW9yYWxcIiB9XHJcbiAgfSxcclxuICB7XHJcbiAgICBjb250ZW50OiBcIkNvZ25pdGl2ZSByZXN0cnVjdHVyaW5nIGhlbHBzIHdpdGggZGVwcmVzc2lvbiBieSBpZGVudGlmeWluZyBhbmQgY2hhbGxlbmdpbmcgbmVnYXRpdmUgdGhvdWdodCBwYXR0ZXJucy4gQXNrIHlvdXJzZWxmOiAnSXMgdGhpcyB0aG91Z2h0IGhlbHBmdWw/IElzIGl0IGJhc2VkIG9uIGZhY3RzPyBXaGF0J3MgYSBtb3JlIGJhbGFuY2VkIHdheSB0byBsb29rIGF0IHRoaXM/J1wiLFxyXG4gICAgbWV0YWRhdGE6IHsgdHlwZTogXCJkZXByZXNzaW9uXCIsIHRlY2huaXF1ZTogXCJjb2duaXRpdmVcIiB9XHJcbiAgfSxcclxuXHJcbiAgLy8gUmVsYXRpb25zaGlwIENvdW5zZWxpbmdcclxuICB7XHJcbiAgICBjb250ZW50OiBcIkluIHJlbGF0aW9uc2hpcCBjb3Vuc2VsaW5nLCBhY3RpdmUgbGlzdGVuaW5nIGludm9sdmVzIGdpdmluZyBmdWxsIGF0dGVudGlvbiwgcmVmbGVjdGluZyBiYWNrIHdoYXQgeW91IGhlYXIsIGFuZCBhc2tpbmcgY2xhcmlmeWluZyBxdWVzdGlvbnMuIFRoaXMgaGVscHMgYnVpbGQgdW5kZXJzdGFuZGluZyBhbmQgdHJ1c3QgYmV0d2VlbiBwYXJ0bmVycy5cIixcclxuICAgIG1ldGFkYXRhOiB7IHR5cGU6IFwicmVsYXRpb25zaGlwc1wiLCB0ZWNobmlxdWU6IFwiY29tbXVuaWNhdGlvblwiIH1cclxuICB9LFxyXG4gIHtcclxuICAgIGNvbnRlbnQ6IFwiVGhlICdJJyBzdGF0ZW1lbnQgdGVjaG5pcXVlIGhlbHBzIGV4cHJlc3MgZmVlbGluZ3Mgd2l0aG91dCBibGFtaW5nOiAnSSBmZWVsIFtlbW90aW9uXSB3aGVuIFtzcGVjaWZpYyBzaXR1YXRpb25dIGJlY2F1c2UgW3JlYXNvbl0uJyBUaGlzIHByb21vdGVzIGNvbnN0cnVjdGl2ZSBkaWFsb2d1ZSBhbmQgcmVkdWNlcyBkZWZlbnNpdmVuZXNzLlwiLFxyXG4gICAgbWV0YWRhdGE6IHsgdHlwZTogXCJyZWxhdGlvbnNoaXBzXCIsIHRlY2huaXF1ZTogXCJjb21tdW5pY2F0aW9uXCIgfVxyXG4gIH0sXHJcbiAge1xyXG4gICAgY29udGVudDogXCJTZXR0aW5nIGhlYWx0aHkgYm91bmRhcmllcyBpbiByZWxhdGlvbnNoaXBzIGludm9sdmVzIGNsZWFybHkgY29tbXVuaWNhdGluZyB5b3VyIG5lZWRzLCBsaW1pdHMsIGFuZCBleHBlY3RhdGlvbnMuIEl0J3MgaW1wb3J0YW50IHRvIGJlIGNvbnNpc3RlbnQgYW5kIHJlc3BlY3RmdWwgd2hlbiBlbmZvcmNpbmcgYm91bmRhcmllcy5cIixcclxuICAgIG1ldGFkYXRhOiB7IHR5cGU6IFwicmVsYXRpb25zaGlwc1wiLCB0ZWNobmlxdWU6IFwiYm91bmRhcmllc1wiIH1cclxuICB9LFxyXG5cclxuICAvLyBTdHJlc3MgTWFuYWdlbWVudFxyXG4gIHtcclxuICAgIGNvbnRlbnQ6IFwiVGltZSBtYW5hZ2VtZW50IGlzIGNydWNpYWwgZm9yIHN0cmVzcyByZWR1Y3Rpb24uIFVzZSB0aGUgRWlzZW5ob3dlciBNYXRyaXggdG8gcHJpb3JpdGl6ZSB0YXNrczogdXJnZW50IGFuZCBpbXBvcnRhbnQsIGltcG9ydGFudCBidXQgbm90IHVyZ2VudCwgdXJnZW50IGJ1dCBub3QgaW1wb3J0YW50LCBhbmQgbmVpdGhlciB1cmdlbnQgbm9yIGltcG9ydGFudC5cIixcclxuICAgIG1ldGFkYXRhOiB7IHR5cGU6IFwic3RyZXNzXCIsIHRlY2huaXF1ZTogXCJtYW5hZ2VtZW50XCIgfVxyXG4gIH0sXHJcbiAge1xyXG4gICAgY29udGVudDogXCJNaW5kZnVsbmVzcyBtZWRpdGF0aW9uIGNhbiByZWR1Y2Ugc3RyZXNzIGJ5IGJyaW5naW5nIGF0dGVudGlvbiB0byB0aGUgcHJlc2VudCBtb21lbnQuIFN0YXJ0IHdpdGgganVzdCA1IG1pbnV0ZXMgZGFpbHksIGZvY3VzaW5nIG9uIHlvdXIgYnJlYXRoIGFuZCBnZW50bHkgYnJpbmdpbmcgeW91ciBtaW5kIGJhY2sgd2hlbiBpdCB3YW5kZXJzLlwiLFxyXG4gICAgbWV0YWRhdGE6IHsgdHlwZTogXCJzdHJlc3NcIiwgdGVjaG5pcXVlOiBcIm1pbmRmdWxuZXNzXCIgfVxyXG4gIH0sXHJcbiAge1xyXG4gICAgY29udGVudDogXCJTZWxmLWNhcmUgaXMgZXNzZW50aWFsIGZvciBzdHJlc3MgbWFuYWdlbWVudC4gQ3JlYXRlIGEgZGFpbHkgcm91dGluZSB0aGF0IGluY2x1ZGVzIGFkZXF1YXRlIHNsZWVwLCBoZWFsdGh5IGVhdGluZywgcmVndWxhciBleGVyY2lzZSwgYW5kIGFjdGl2aXRpZXMgeW91IGVuam95LlwiLFxyXG4gICAgbWV0YWRhdGE6IHsgdHlwZTogXCJzdHJlc3NcIiwgdGVjaG5pcXVlOiBcInNlbGYtY2FyZVwiIH1cclxuICB9LFxyXG5cclxuICAvLyBHcmllZiBTdXBwb3J0XHJcbiAge1xyXG4gICAgY29udGVudDogXCJUaGUgZ3JpZXZpbmcgcHJvY2VzcyBpcyB1bmlxdWUgdG8gZWFjaCBwZXJzb24uIEFsbG93IHlvdXJzZWxmIHRvIGZlZWwgYWxsIGVtb3Rpb25zIHdpdGhvdXQganVkZ21lbnQuIFRoZXJlJ3Mgbm8gJ3JpZ2h0JyB3YXkgdG8gZ3JpZXZlLCBhbmQgaGVhbGluZyB0YWtlcyB0aW1lLlwiLFxyXG4gICAgbWV0YWRhdGE6IHsgdHlwZTogXCJncmllZlwiLCB0ZWNobmlxdWU6IFwiZW1vdGlvbmFsXCIgfVxyXG4gIH0sXHJcbiAge1xyXG4gICAgY29udGVudDogXCJDcmVhdGluZyByaXR1YWxzIGNhbiBoZWxwIHByb2Nlc3MgZ3JpZWYuIFRoaXMgbWlnaHQgaW5jbHVkZSB3cml0aW5nIGxldHRlcnMgdG8geW91ciBsb3ZlZCBvbmUsIGNyZWF0aW5nIGEgbWVtb3J5IGJvb2ssIG9yIGVzdGFibGlzaGluZyBuZXcgdHJhZGl0aW9ucyB0byBob25vciB0aGVpciBtZW1vcnkuXCIsXHJcbiAgICBtZXRhZGF0YTogeyB0eXBlOiBcImdyaWVmXCIsIHRlY2huaXF1ZTogXCJyaXR1YWxcIiB9XHJcbiAgfSxcclxuICB7XHJcbiAgICBjb250ZW50OiBcIlNlbGYtY29tcGFzc2lvbiBpcyBjcnVjaWFsIGR1cmluZyBncmllZi4gVHJlYXQgeW91cnNlbGYgd2l0aCB0aGUgc2FtZSBraW5kbmVzcyB5b3Ugd291bGQgb2ZmZXIgYSBmcmllbmQsIGFja25vd2xlZGdpbmcgdGhhdCBncmllZiBpcyBhIG5hdHVyYWwgcmVzcG9uc2UgdG8gbG9zcy5cIixcclxuICAgIG1ldGFkYXRhOiB7IHR5cGU6IFwiZ3JpZWZcIiwgdGVjaG5pcXVlOiBcInNlbGYtY29tcGFzc2lvblwiIH1cclxuICB9LFxyXG5cclxuICAvLyBTZWxmLUVzdGVlbSBCdWlsZGluZ1xyXG4gIHtcclxuICAgIGNvbnRlbnQ6IFwiQ2hhbGxlbmdlIG5lZ2F0aXZlIHNlbGYtdGFsayBieSBpZGVudGlmeWluZyBjb2duaXRpdmUgZGlzdG9ydGlvbnMgbGlrZSBhbGwtb3Itbm90aGluZyB0aGlua2luZywgb3ZlcmdlbmVyYWxpemF0aW9uLCBhbmQgbWVudGFsIGZpbHRlcmluZy4gUmVwbGFjZSB0aGVtIHdpdGggbW9yZSBiYWxhbmNlZCB0aG91Z2h0cy5cIixcclxuICAgIG1ldGFkYXRhOiB7IHR5cGU6IFwic2VsZi1lc3RlZW1cIiwgdGVjaG5pcXVlOiBcImNvZ25pdGl2ZVwiIH1cclxuICB9LFxyXG4gIHtcclxuICAgIGNvbnRlbnQ6IFwiUHJhY3RpY2Ugc2VsZi1jb21wYXNzaW9uIGJ5IHRyZWF0aW5nIHlvdXJzZWxmIHdpdGggdGhlIHNhbWUga2luZG5lc3MgeW91J2Qgc2hvdyBhIGZyaWVuZC4gQWNrbm93bGVkZ2UgeW91ciBzdHJ1Z2dsZXMgd2l0aG91dCBqdWRnbWVudCBhbmQgcmVjb2duaXplIHRoYXQgaW1wZXJmZWN0aW9uIGlzIHBhcnQgb2YgYmVpbmcgaHVtYW4uXCIsXHJcbiAgICBtZXRhZGF0YTogeyB0eXBlOiBcInNlbGYtZXN0ZWVtXCIsIHRlY2huaXF1ZTogXCJzZWxmLWNvbXBhc3Npb25cIiB9XHJcbiAgfSxcclxuICB7XHJcbiAgICBjb250ZW50OiBcIlNldCByZWFsaXN0aWMgZ29hbHMgYW5kIGNlbGVicmF0ZSBzbWFsbCBhY2hpZXZlbWVudHMuIEJyZWFrIGxhcmdlciBnb2FscyBpbnRvIG1hbmFnZWFibGUgc3RlcHMgYW5kIGFja25vd2xlZGdlIHlvdXIgcHJvZ3Jlc3MsIG5vIG1hdHRlciBob3cgc21hbGwuXCIsXHJcbiAgICBtZXRhZGF0YTogeyB0eXBlOiBcInNlbGYtZXN0ZWVtXCIsIHRlY2huaXF1ZTogXCJnb2FsLXNldHRpbmdcIiB9XHJcbiAgfSxcclxuXHJcbiAgLy8gQ3Jpc2lzIFN1cHBvcnRcclxuICB7XHJcbiAgICBjb250ZW50OiBcIklmIHNvbWVvbmUgZXhwcmVzc2VzIHRob3VnaHRzIG9mIHNlbGYtaGFybSwgc3RheSBjYWxtIGFuZCBsaXN0ZW4gd2l0aG91dCBqdWRnbWVudC4gQXNrIGRpcmVjdGx5IGFib3V0IHRoZWlyIGludGVudGlvbnMgYW5kIGVuc3VyZSB0aGV5J3JlIHNhZmUuIENvbm5lY3QgdGhlbSB3aXRoIGVtZXJnZW5jeSBzZXJ2aWNlcyBpZiBuZWVkZWQuXCIsXHJcbiAgICBtZXRhZGF0YTogeyB0eXBlOiBcImNyaXNpc1wiLCB0ZWNobmlxdWU6IFwiaW50ZXJ2ZW50aW9uXCIgfVxyXG4gIH0sXHJcbiAge1xyXG4gICAgY29udGVudDogXCJEdXJpbmcgYSBwYW5pYyBhdHRhY2ssIGhlbHAgdGhlIHBlcnNvbiBmb2N1cyBvbiB0aGVpciBicmVhdGhpbmcuIEd1aWRlIHRoZW0gdGhyb3VnaCBzbG93LCBkZWVwIGJyZWF0aHMgYW5kIHJlbWluZCB0aGVtIHRoYXQgdGhlIGF0dGFjayB3aWxsIHBhc3MuIFN0YXkgcHJlc2VudCBhbmQgb2ZmZXIgcmVhc3N1cmFuY2UuXCIsXHJcbiAgICBtZXRhZGF0YTogeyB0eXBlOiBcImNyaXNpc1wiLCB0ZWNobmlxdWU6IFwic3VwcG9ydFwiIH1cclxuICB9LFxyXG4gIHtcclxuICAgIGNvbnRlbnQ6IFwiRm9yIGFjdXRlIHN0cmVzcywgdXNlIHRoZSBTVE9QIHRlY2huaXF1ZTogU3RvcCwgVGFrZSBhIHN0ZXAgYmFjaywgT2JzZXJ2ZSB5b3VyIHRob3VnaHRzIGFuZCBmZWVsaW5ncywgUHJvY2VlZCBtaW5kZnVsbHkuIFRoaXMgaGVscHMgY3JlYXRlIHNwYWNlIGJldHdlZW4gdGhlIHN0cmVzc29yIGFuZCB5b3VyIHJlc3BvbnNlLlwiLFxyXG4gICAgbWV0YWRhdGE6IHsgdHlwZTogXCJjcmlzaXNcIiwgdGVjaG5pcXVlOiBcImNvcGluZ1wiIH1cclxuICB9XHJcbl07XHJcblxyXG4vLyBJbml0aWFsaXplIHRoZSBrbm93bGVkZ2UgYmFzZVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZUtub3dsZWRnZUJhc2UoKSB7XHJcbiAgYXdhaXQgc3RvcmVEb2N1bWVudHModGhlcmFweUNvbnRlbnQubWFwKGl0ZW0gPT4gaXRlbS5jb250ZW50KSk7XHJcbn0gIl0sIm5hbWVzIjpbImNvbnNvbGUiLCJsb2ciLCJwcm9jZXNzIiwiZW52IiwiUElORUNPTkVfQVBJX0tFWSIsIlBJTkVDT05FX0VOVklST05NRU5UIiwiUElORUNPTkVfSU5ERVgiLCJPUEVOQUlfQVBJX0tFWSIsIlBpbmVjb25lIiwiT3BlbkFJRW1iZWRkaW5ncyIsIkRvY3VtZW50IiwiUmVjdXJzaXZlQ2hhcmFjdGVyVGV4dFNwbGl0dGVyIiwiZW1iZWRkaW5ncyIsIm9wZW5BSUFwaUtleSIsInRleHRTcGxpdHRlciIsImNodW5rU2l6ZSIsImNodW5rT3ZlcmxhcCIsImluaXRpYWxpemVQaW5lY29uZSIsInBpbmVjb25lIiwiYXBpS2V5IiwiZW52aXJvbm1lbnQiLCJpbmRleCIsInN0b3JlRG9jdW1lbnRzIiwiZG9jdW1lbnRzIiwiZG9jcyIsImNyZWF0ZURvY3VtZW50cyIsInZlY3RvcnMiLCJQcm9taXNlIiwiYWxsIiwibWFwIiwiZG9jIiwiZW1iZWRkaW5nIiwiZW1iZWRRdWVyeSIsInBhZ2VDb250ZW50IiwiaWQiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCJ2YWx1ZXMiLCJtZXRhZGF0YSIsInRleHQiLCJ1cHNlcnQiLCJyZXRyaWV2ZUNvbnRleHQiLCJxdWVyeSIsImsiLCJxdWVyeUVtYmVkZGluZyIsInNlYXJjaFJlc3BvbnNlIiwidmVjdG9yIiwidG9wSyIsImluY2x1ZGVNZXRhZGF0YSIsIm1hdGNoZXMiLCJtYXRjaCIsInRoZXJhcHlDb250ZW50IiwiY29udGVudCIsInR5cGUiLCJ0ZWNobmlxdWUiLCJpbml0aWFsaXplS25vd2xlZGdlQmFzZSIsIml0ZW0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./utils/rag.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cchat.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();