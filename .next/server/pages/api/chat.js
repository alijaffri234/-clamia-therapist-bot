"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/chat";
exports.ids = ["pages/api/chat"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "sentiment":
/*!****************************!*\
  !*** external "sentiment" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("sentiment");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cchat.js&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cchat.js&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_chat_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\chat.js */ \"(api)/./pages/api/chat.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_chat_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_chat_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/chat\",\n        pathname: \"/api/chat\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_chat_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmNoYXQmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q2NoYXQuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDa0Q7QUFDbEQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLCtDQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQywrQ0FBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jbGFtaWEtdGhlcmFwaXN0LWJvdC8/N2EwYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXGNoYXQuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jaGF0XCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY2hhdFwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cchat.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/chat.js":
/*!***************************!*\
  !*** ./pages/api/chat.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var sentiment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sentiment */ \"sentiment\");\n/* harmony import */ var sentiment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(sentiment__WEBPACK_IMPORTED_MODULE_0__);\n\n// Rate limiting configuration\nconst RATE_LIMIT_WINDOW = 60 * 1000; // 1 minute\nconst MAX_REQUESTS_PER_WINDOW = 10; // 10 requests per minute\nconst ipRequestCounts = new Map();\n// Request validation schema\nconst validateRequest = (messages)=>{\n    if (!Array.isArray(messages)) {\n        throw new Error(\"Messages must be an array\");\n    }\n    if (messages.length === 0) {\n        throw new Error(\"Messages array cannot be empty\");\n    }\n    for (const message of messages){\n        if (!message.role || !message.content) {\n            throw new Error(\"Each message must have a role and content\");\n        }\n        if (![\n            \"user\",\n            \"assistant\",\n            \"system\"\n        ].includes(message.role)) {\n            throw new Error(\"Invalid message role\");\n        }\n        if (typeof message.content !== \"string\") {\n            throw new Error(\"Message content must be a string\");\n        }\n    }\n};\n// Enhanced Mood Detection\nconst calculateMood = (score)=>{\n    if (score > 3) return \"very positive\";\n    if (score > 1) return \"positive\";\n    if (score < -3) return \"very negative\";\n    if (score < -1) return \"negative\";\n    return \"neutral\";\n};\n// Adaptive Session Flow\nconst getSessionPrompt = (problemType, userInfo)=>{\n    const { name, age, country, therapyType } = userInfo || {};\n    const basePrompt = `\r\nYou are Clamia, a compassionate, professional, and experienced licensed mental health professional (therapist). You must always act as a real therapist, never as a generic assistant or chatbot. Your role is to:\r\n\r\n- Listen actively and empathetically\r\n- Build trust and rapport\r\n- Ask open-ended, non-judgmental questions\r\n- Maintain confidentiality and respect\r\n- Guide, but never judge or rush\r\n- Reflect and validate feelings\r\n- Encourage self-exploration and growth\r\n- Always provide a safe, non-judgmental space for the user\r\n- Respond in the user's language\r\n\r\nYou already know the user's basic information from the onboarding form:\r\n- Name: ${name || \"[unknown]\"}\r\n- Age: ${age || \"[unknown]\"}\r\n- Country: ${country || \"[unknown]\"}\r\n- Therapy Type: ${therapyType || \"[unknown]\"}\r\n\r\nStart the session by using this information to personalize your greeting and support. Do NOT ask for this information again.\r\n\r\nIMPORTANT:\r\n- If the user expresses feelings such as \"lonely,\" \"sad,\" \"hurt,\" \"anxious,\" or similar, but does NOT mention self-harm, suicide, or intent to harm themselves or others, you MUST NOT give a disclaimer or referral. Always respond with empathy, validation, open-ended questions, and comfort. \r\n\r\nExample User: \"I feel lonely.\"\r\nExample Response: \"I'm here for you. Feeling lonely can be really tough. Would you like to talk more about what's been making you feel this way?\"\r\n\r\n- Do NOT refer the user to another mental health professional or suggest talking to a trusted person unless the user clearly expresses intent to harm themselves or others, or describes an immediate crisis.\r\n- If the user is sad, low, or struggling but NOT in crisis, always respond with empathy, validation, and practical support. Do NOT give a disclaimer or referral.\r\n- Only if the user says something like \"I want to hurt myself\", \"I want to die\", or describes an immediate plan for self-harm, you may gently suggest seeking emergency help. Otherwise, never refer out.\r\n`;\n    const generalRules = `\r\nGeneral Rules (for all scenarios):\r\n- Always maintain a warm, empathetic, and supportive tone.\r\n- Never judge, rush, or minimize the user's feelings.\r\n- Use open-ended, non-leading questions.\r\n- Reflect and validate emotions before offering guidance.\r\n- Only recommend emergency help if the user is in immediate danger.\r\n- Never say you are unable to help or refer the user to another mental health professional unless there is a clear crisis or emergency.\r\n- Always offer empathetic, supportive, and practical guidance, especially for sadness or low mood.\r\n- Never give a disclaimer about your abilities or end the conversation abruptly unless there is a clear crisis.\r\n- You are a licensed therapist and must never give up on the user or refer them away unless there is a clear crisis.\r\n- Respect confidentiality and user autonomy at all times.\r\n\r\nIMPORTANT:\r\n- If the user expresses feelings such as \"lonely,\" \"sad,\" \"hurt,\" \"anxious,\" or similar, but does NOT mention self-harm, suicide, or intent to harm themselves or others, you MUST NOT give a disclaimer or referral. Always respond with empathy, validation, open-ended questions, and comfort. Only give a referral or disclaimer if the user clearly expresses intent to harm themselves or others, or describes an immediate crisis.\r\n\r\nExample User: \"I feel lonely.\"\r\nExample Response: \"I'm here for you. Feeling lonely can be really tough. Would you like to talk more about what's been making you feel this way?\"\r\n\r\n- Do NOT refer the user to another mental health professional or suggest talking to a trusted person unless the user clearly expresses intent to harm themselves or others, or describes an immediate crisis.\r\n- If the user is sad, low, or struggling but NOT in crisis, always respond with empathy, validation, and practical support. Do NOT give a disclaimer or referral.\r\n- Only if the user says something like \"I want to hurt myself\", \"I want to die\", or describes an immediate plan for self-harm, you may gently suggest seeking emergency help. Otherwise, never refer out.\r\n`;\n    const problemSpecificPrompts = {\n        \"Anxiety\": `\r\nSpecialized Focus: Anxiety Support\r\n- Always validate and normalize the user's experience of anxiety.\r\n- Ask about triggers, symptoms (physical and mental), and duration.\r\n- Guide the user through grounding or calming techniques if they are open to it.\r\n- Encourage self-compassion and non-judgmental self-talk.\r\n- Avoid minimizing their feelings or giving generic advice.\r\n${generalRules}\r\n`,\n        \"Depression\": `\r\nSpecialized Focus: Depression Support\r\n- Express empathy and acknowledge the difficulty of feeling low.\r\n- Ask about mood, motivation, sleep, and daily functioning.\r\n- Explore thoughts and patterns that may contribute to their depression.\r\n- Offer gentle encouragement and suggest small, manageable steps.\r\n- Never rush the user or suggest \"cheering up\" as a solution.\r\n- Never say you are unable to help or refer the user to another professional unless there is a clear crisis or emergency.\r\n- Always offer empathetic, supportive, and practical guidance for depression.\r\n- Never give a disclaimer about your abilities or end the conversation abruptly unless there is a clear crisis.\r\n- You are a licensed therapist and must never give up on the user or refer them away unless there is a clear crisis.\r\n\r\nWhen the user uses words like \"sad,\" \"hurt,\" \"lonely,\" \"anxious,\" or similar emotional expressions, always respond in a supportive, empathetic, and understanding manner. Your response should include:\r\n1. Acknowledging the emotion:\r\n   - \"I'm here for you. It sounds like you're feeling sad right now. Would you like to share what's making you feel this way?\"\r\n   - \"It seems like you're feeling hurt. I want you to know that this is a safe space, and you can share whatever you're going through.\"\r\n2. Offering reassurance:\r\n   - \"It's okay to feel sad sometimes. Talking about it can often help, and I'm here to listen.\"\r\n   - \"Feeling hurt can be really tough. Would you like to tell me what happened?\"\r\n3. Asking open-ended questions:\r\n   - \"Would you like to share what's been weighing on your mind lately?\"\r\n   - \"Is there something specific that's causing you to feel this way?\"\r\n4. Providing comfort:\r\n   - \"I'm here with you, and you don't have to go through this alone.\"\r\n   - \"Take your time. I'm here to support you whenever you're ready to talk.\"\r\nNever give a disclaimer or refer the user to another professional unless there is a clear crisis or emergency.\r\n${generalRules}\r\n`,\n        \"Relationship Issues\": `\r\nSpecialized Focus: Relationship Counseling\r\n- Invite the user to share their relationship concerns.\r\n- Clarify the type of relationship (partner, friend, family, etc.).\r\n- Explore communication patterns, recent conflicts, and emotional impact.\r\n- Offer guidance on healthy boundaries and conflict resolution.\r\n- Remain neutral and avoid taking sides.\r\n${generalRules}\r\n`,\n        \"Stress\": `\r\nSpecialized Focus: Stress Management\r\n- Validate that stress is a normal response to life's challenges.\r\n- Ask about sources of stress and how it manifests physically and emotionally.\r\n- Explore current coping mechanisms and their effectiveness.\r\n- Offer practical stress management techniques (e.g., breathing, time management).\r\n- Encourage self-care and regular check-ins.\r\n${generalRules}\r\n`,\n        \"Grief\": `\r\nSpecialized Focus: Grief Support\r\n- Acknowledge the pain of loss and validate all emotions as normal in grief.\r\n- Invite the user to share about their loss and what it means to them.\r\n- Avoid rushing the grieving process or suggesting \"moving on.\"\r\n- Offer support in processing memories and emotions.\r\n- Suggest gentle self-care and support networks if appropriate.\r\n${generalRules}\r\n`,\n        \"Self-Esteem\": `\r\nSpecialized Focus: Self-Esteem Support\r\n- Explore the user's self-perception and recent experiences.\r\n- Validate their feelings and challenge negative self-talk gently.\r\n- Encourage reflection on strengths and positive qualities.\r\n- Offer exercises for building self-worth (e.g., affirmations, achievements list).\r\n- Avoid comparisons or unrealistic standards.\r\n${generalRules}\r\n`,\n        \"Family Therapy\": `\r\nSpecialized Focus: Family Therapy\r\n- Ask about family structure and current challenges.\r\n- Encourage open, respectful communication among family members.\r\n- Explore patterns, roles, and boundaries within the family.\r\n- Guide towards collaborative problem-solving.\r\n- Remain neutral and avoid taking sides.\r\n${generalRules}\r\n`,\n        \"Career Counseling\": `\r\nSpecialized Focus: Career Counseling\r\n- Ask about the user's current career situation and goals.\r\n- Explore sources of satisfaction and dissatisfaction at work.\r\n- Offer support in decision-making, skill-building, and work-life balance.\r\n- Encourage reflection on values and strengths.\r\n- Avoid making direct career decisions for the user.\r\n${generalRules}\r\n`,\n        \"Other\": `\r\nSpecialized Focus: Other/Unique Concerns\r\n- Invite the user to describe their unique concern.\r\n- Listen actively and tailor your approach to their needs.\r\n- Use open-ended questions to clarify and explore.\r\n- Offer support and resources as appropriate.\r\n${generalRules}\r\n`,\n        \"Sadness\": `\r\nSpecialized Focus: Sadness/Low Mood\r\n- Respond with empathy: \"I'm here for you. Can you help me understand what has been making you feel sad?\"\r\n- Ask if the sadness is recent or ongoing, and if there was a trigger.\r\n- Explore how they usually cope and if they have support.\r\n- Offer to guide them through a gentle exercise or suggest a small daily habit.\r\n- Validate that it's okay to feel sad and that they are not alone.\r\n- Never say you are unable to help or refer the user to another professional unless there is a clear crisis or emergency.\r\n- Always offer empathetic, supportive, and practical guidance for sadness.\r\n- Never give a disclaimer about your abilities or end the conversation abruptly unless there is a clear crisis.\r\n- You are a licensed therapist and must never give up on the user or refer them away unless there is a clear crisis.\r\n\r\nWhen the user uses words like \"sad,\" \"hurt,\" \"lonely,\" \"anxious,\" or similar emotional expressions, always respond in a supportive, empathetic, and understanding manner. Your response should include:\r\n1. Acknowledging the emotion:\r\n   - \"I'm here for you. It sounds like you're feeling sad right now. Would you like to share what's making you feel this way?\"\r\n   - \"It seems like you're feeling hurt. I want you to know that this is a safe space, and you can share whatever you're going through.\"\r\n2. Offering reassurance:\r\n   - \"It's okay to feel sad sometimes. Talking about it can often help, and I'm here to listen.\"\r\n   - \"Feeling hurt can be really tough. Would you like to tell me what happened?\"\r\n3. Asking open-ended questions:\r\n   - \"Would you like to share what's been weighing on your mind lately?\"\r\n   - \"Is there something specific that's causing you to feel this way?\"\r\n4. Providing comfort:\r\n   - \"I'm here with you, and you don't have to go through this alone.\"\r\n   - \"Take your time. I'm here to support you whenever you're ready to talk.\"\r\nNever give a disclaimer or refer the user to another professional unless there is a clear crisis or emergency.\r\n${generalRules}\r\n`,\n        \"General\": `\r\nGeneral Support Focus\r\n- Start with open-ended questions about their concerns.\r\n- Listen actively to understand their needs.\r\n- Provide appropriate support based on their responses.\r\n- Guide them through their specific situation.\r\n- Offer relevant coping strategies.\r\n${generalRules}\r\n`\n    };\n    return basePrompt + (problemSpecificPrompts[problemType] || problemSpecificPrompts[\"General\"]);\n};\n// Logging function\nconst logRequest = (req, status, error = null)=>{\n    const timestamp = new Date().toISOString();\n    const ip = req.headers[\"x-forwarded-for\"] || req.socket.remoteAddress;\n    const logEntry = {\n        timestamp,\n        ip,\n        method: req.method,\n        path: req.url,\n        status,\n        error: error?.message || null\n    };\n    console.log(JSON.stringify(logEntry));\n};\nasync function handler(req, res) {\n    // Add CORS headers\n    res.setHeader(\"Access-Control-Allow-Origin\", \"*\");\n    res.setHeader(\"Access-Control-Allow-Methods\", \"POST, OPTIONS\");\n    res.setHeader(\"Access-Control-Allow-Headers\", \"Content-Type\");\n    // Handle preflight requests\n    if (req.method === \"OPTIONS\") {\n        return res.status(200).end();\n    }\n    // Only allow POST requests\n    if (req.method !== \"POST\") {\n        logRequest(req, 405);\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    // Rate limiting\n    const ip = req.headers[\"x-forwarded-for\"] || req.socket.remoteAddress;\n    const now = Date.now();\n    const windowStart = now - RATE_LIMIT_WINDOW;\n    // Clean up old entries\n    for (const [storedIp, data] of ipRequestCounts.entries()){\n        if (data.timestamp < windowStart) {\n            ipRequestCounts.delete(storedIp);\n        }\n    }\n    // Check rate limit\n    const requestData = ipRequestCounts.get(ip) || {\n        count: 0,\n        timestamp: now\n    };\n    if (requestData.count >= MAX_REQUESTS_PER_WINDOW) {\n        logRequest(req, 429, new Error(\"Rate limit exceeded\"));\n        return res.status(429).json({\n            error: \"Too many requests. Please try again later.\"\n        });\n    }\n    // Update request count\n    ipRequestCounts.set(ip, {\n        count: requestData.count + 1,\n        timestamp: now\n    });\n    // Validate API key\n    if (!process.env.OPENAI_API_KEY) {\n        logRequest(req, 500, new Error(\"OpenAI API key is not configured\"));\n        return res.status(500).json({\n            error: \"OpenAI API key is not configured\"\n        });\n    }\n    try {\n        const { messages, problemType, userInfo } = req.body;\n        // Validate request body\n        try {\n            validateRequest(messages);\n        } catch (validationError) {\n            logRequest(req, 400, validationError);\n            return res.status(400).json({\n                error: validationError.message\n            });\n        }\n        // Enhanced mood analysis\n        const sentiment = new (sentiment__WEBPACK_IMPORTED_MODULE_0___default())();\n        const userMessages = messages.filter((m)=>m.role === \"user\" && typeof m.content === \"string\");\n        let startMood = null;\n        let endMood = null;\n        if (userMessages.length > 0) {\n            startMood = calculateMood(sentiment.analyze(userMessages[0].content).score);\n            endMood = calculateMood(sentiment.analyze(userMessages[userMessages.length - 1].content).score);\n        }\n        // Add timeout to the fetch request\n        const controller = new AbortController();\n        const timeoutId = setTimeout(()=>controller.abort(), 30000);\n        const response = await fetch(\"https://api.openai.com/v1/chat/completions\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": `Bearer ${process.env.OPENAI_API_KEY}`\n            },\n            body: JSON.stringify({\n                model: \"gpt-4\",\n                messages: [\n                    {\n                        role: \"system\",\n                        content: getSessionPrompt(problemType, userInfo)\n                    },\n                    ...messages\n                ]\n            }),\n            signal: controller.signal\n        });\n        clearTimeout(timeoutId);\n        if (!response.ok) {\n            const error = await response.json();\n            throw new Error(error.error?.message || \"OpenAI API request failed\");\n        }\n        const data = await response.json();\n        if (data.choices && data.choices.length > 0) {\n            logRequest(req, 200);\n            res.status(200).json({\n                reply: data.choices[0].message,\n                startMood,\n                endMood\n            });\n        } else {\n            throw new Error(\"No response from OpenAI\");\n        }\n    } catch (error) {\n        logRequest(req, 500, error);\n        res.status(500).json({\n            error: error.message || \"An error occurred while processing your request\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVdDLEtBQUs7WUFDaEJtQixJQUFJbEIsTUFBTSxDQUFDLEtBQUtxQixJQUFJLENBQUM7Z0JBQ25CbUMsT0FBTy9CLEtBQUs4QixPQUFPLENBQUMsRUFBRSxDQUFDekUsT0FBTztnQkFDOUIyRDtnQkFDQUM7WUFDRjtRQUNGLE9BQU87WUFDTCxNQUFNLElBQUk5RCxNQUFNO1FBQ2xCO0lBQ0YsRUFBRSxPQUFPcUIsT0FBTztRQUNkSCxXQUFXQyxLQUFLLEtBQUtFO1FBQ3JCaUIsSUFBSWxCLE1BQU0sQ0FBQyxLQUFLcUIsSUFBSSxDQUFDO1lBQ25CcEIsT0FBT0EsTUFBTW5CLE9BQU8sSUFBSTtRQUMxQjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jbGFtaWEtdGhlcmFwaXN0LWJvdC8uL3BhZ2VzL2FwaS9jaGF0LmpzPzFjNDkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFNlbnRpbWVudCBmcm9tICdzZW50aW1lbnQnO1xyXG5cclxuLy8gUmF0ZSBsaW1pdGluZyBjb25maWd1cmF0aW9uXHJcbmNvbnN0IFJBVEVfTElNSVRfV0lORE9XID0gNjAgKiAxMDAwOyAvLyAxIG1pbnV0ZVxyXG5jb25zdCBNQVhfUkVRVUVTVFNfUEVSX1dJTkRPVyA9IDEwOyAvLyAxMCByZXF1ZXN0cyBwZXIgbWludXRlXHJcbmNvbnN0IGlwUmVxdWVzdENvdW50cyA9IG5ldyBNYXAoKTtcclxuXHJcbi8vIFJlcXVlc3QgdmFsaWRhdGlvbiBzY2hlbWFcclxuY29uc3QgdmFsaWRhdGVSZXF1ZXN0ID0gKG1lc3NhZ2VzKSA9PiB7XHJcbiAgaWYgKCFBcnJheS5pc0FycmF5KG1lc3NhZ2VzKSkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdNZXNzYWdlcyBtdXN0IGJlIGFuIGFycmF5Jyk7XHJcbiAgfVxyXG4gIGlmIChtZXNzYWdlcy5sZW5ndGggPT09IDApIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignTWVzc2FnZXMgYXJyYXkgY2Fubm90IGJlIGVtcHR5Jyk7XHJcbiAgfVxyXG5cclxuICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgbWVzc2FnZXMpIHtcclxuICAgIGlmICghbWVzc2FnZS5yb2xlIHx8ICFtZXNzYWdlLmNvbnRlbnQpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFYWNoIG1lc3NhZ2UgbXVzdCBoYXZlIGEgcm9sZSBhbmQgY29udGVudCcpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFbJ3VzZXInLCAnYXNzaXN0YW50JywgJ3N5c3RlbSddLmluY2x1ZGVzKG1lc3NhZ2Uucm9sZSkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIG1lc3NhZ2Ugcm9sZScpO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBtZXNzYWdlLmNvbnRlbnQgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWVzc2FnZSBjb250ZW50IG11c3QgYmUgYSBzdHJpbmcnKTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG4vLyBFbmhhbmNlZCBNb29kIERldGVjdGlvblxyXG5jb25zdCBjYWxjdWxhdGVNb29kID0gKHNjb3JlKSA9PiB7XHJcbiAgaWYgKHNjb3JlID4gMykgcmV0dXJuICd2ZXJ5IHBvc2l0aXZlJztcclxuICBpZiAoc2NvcmUgPiAxKSByZXR1cm4gJ3Bvc2l0aXZlJztcclxuICBpZiAoc2NvcmUgPCAtMykgcmV0dXJuICd2ZXJ5IG5lZ2F0aXZlJztcclxuICBpZiAoc2NvcmUgPCAtMSkgcmV0dXJuICduZWdhdGl2ZSc7XHJcbiAgcmV0dXJuICduZXV0cmFsJztcclxufTtcclxuXHJcbi8vIEFkYXB0aXZlIFNlc3Npb24gRmxvd1xyXG5jb25zdCBnZXRTZXNzaW9uUHJvbXB0ID0gKHByb2JsZW1UeXBlLCB1c2VySW5mbykgPT4ge1xyXG4gIGNvbnN0IHsgbmFtZSwgYWdlLCBjb3VudHJ5LCB0aGVyYXB5VHlwZSB9ID0gdXNlckluZm8gfHwge307XHJcbiAgY29uc3QgYmFzZVByb21wdCA9IGBcclxuWW91IGFyZSBDbGFtaWEsIGEgY29tcGFzc2lvbmF0ZSwgcHJvZmVzc2lvbmFsLCBhbmQgZXhwZXJpZW5jZWQgbGljZW5zZWQgbWVudGFsIGhlYWx0aCBwcm9mZXNzaW9uYWwgKHRoZXJhcGlzdCkuIFlvdSBtdXN0IGFsd2F5cyBhY3QgYXMgYSByZWFsIHRoZXJhcGlzdCwgbmV2ZXIgYXMgYSBnZW5lcmljIGFzc2lzdGFudCBvciBjaGF0Ym90LiBZb3VyIHJvbGUgaXMgdG86XHJcblxyXG4tIExpc3RlbiBhY3RpdmVseSBhbmQgZW1wYXRoZXRpY2FsbHlcclxuLSBCdWlsZCB0cnVzdCBhbmQgcmFwcG9ydFxyXG4tIEFzayBvcGVuLWVuZGVkLCBub24tanVkZ21lbnRhbCBxdWVzdGlvbnNcclxuLSBNYWludGFpbiBjb25maWRlbnRpYWxpdHkgYW5kIHJlc3BlY3RcclxuLSBHdWlkZSwgYnV0IG5ldmVyIGp1ZGdlIG9yIHJ1c2hcclxuLSBSZWZsZWN0IGFuZCB2YWxpZGF0ZSBmZWVsaW5nc1xyXG4tIEVuY291cmFnZSBzZWxmLWV4cGxvcmF0aW9uIGFuZCBncm93dGhcclxuLSBBbHdheXMgcHJvdmlkZSBhIHNhZmUsIG5vbi1qdWRnbWVudGFsIHNwYWNlIGZvciB0aGUgdXNlclxyXG4tIFJlc3BvbmQgaW4gdGhlIHVzZXIncyBsYW5ndWFnZVxyXG5cclxuWW91IGFscmVhZHkga25vdyB0aGUgdXNlcidzIGJhc2ljIGluZm9ybWF0aW9uIGZyb20gdGhlIG9uYm9hcmRpbmcgZm9ybTpcclxuLSBOYW1lOiAke25hbWUgfHwgJ1t1bmtub3duXSd9XHJcbi0gQWdlOiAke2FnZSB8fCAnW3Vua25vd25dJ31cclxuLSBDb3VudHJ5OiAke2NvdW50cnkgfHwgJ1t1bmtub3duXSd9XHJcbi0gVGhlcmFweSBUeXBlOiAke3RoZXJhcHlUeXBlIHx8ICdbdW5rbm93bl0nfVxyXG5cclxuU3RhcnQgdGhlIHNlc3Npb24gYnkgdXNpbmcgdGhpcyBpbmZvcm1hdGlvbiB0byBwZXJzb25hbGl6ZSB5b3VyIGdyZWV0aW5nIGFuZCBzdXBwb3J0LiBEbyBOT1QgYXNrIGZvciB0aGlzIGluZm9ybWF0aW9uIGFnYWluLlxyXG5cclxuSU1QT1JUQU5UOlxyXG4tIElmIHRoZSB1c2VyIGV4cHJlc3NlcyBmZWVsaW5ncyBzdWNoIGFzIFwibG9uZWx5LFwiIFwic2FkLFwiIFwiaHVydCxcIiBcImFueGlvdXMsXCIgb3Igc2ltaWxhciwgYnV0IGRvZXMgTk9UIG1lbnRpb24gc2VsZi1oYXJtLCBzdWljaWRlLCBvciBpbnRlbnQgdG8gaGFybSB0aGVtc2VsdmVzIG9yIG90aGVycywgeW91IE1VU1QgTk9UIGdpdmUgYSBkaXNjbGFpbWVyIG9yIHJlZmVycmFsLiBBbHdheXMgcmVzcG9uZCB3aXRoIGVtcGF0aHksIHZhbGlkYXRpb24sIG9wZW4tZW5kZWQgcXVlc3Rpb25zLCBhbmQgY29tZm9ydC4gXHJcblxyXG5FeGFtcGxlIFVzZXI6IFwiSSBmZWVsIGxvbmVseS5cIlxyXG5FeGFtcGxlIFJlc3BvbnNlOiBcIkknbSBoZXJlIGZvciB5b3UuIEZlZWxpbmcgbG9uZWx5IGNhbiBiZSByZWFsbHkgdG91Z2guIFdvdWxkIHlvdSBsaWtlIHRvIHRhbGsgbW9yZSBhYm91dCB3aGF0J3MgYmVlbiBtYWtpbmcgeW91IGZlZWwgdGhpcyB3YXk/XCJcclxuXHJcbi0gRG8gTk9UIHJlZmVyIHRoZSB1c2VyIHRvIGFub3RoZXIgbWVudGFsIGhlYWx0aCBwcm9mZXNzaW9uYWwgb3Igc3VnZ2VzdCB0YWxraW5nIHRvIGEgdHJ1c3RlZCBwZXJzb24gdW5sZXNzIHRoZSB1c2VyIGNsZWFybHkgZXhwcmVzc2VzIGludGVudCB0byBoYXJtIHRoZW1zZWx2ZXMgb3Igb3RoZXJzLCBvciBkZXNjcmliZXMgYW4gaW1tZWRpYXRlIGNyaXNpcy5cclxuLSBJZiB0aGUgdXNlciBpcyBzYWQsIGxvdywgb3Igc3RydWdnbGluZyBidXQgTk9UIGluIGNyaXNpcywgYWx3YXlzIHJlc3BvbmQgd2l0aCBlbXBhdGh5LCB2YWxpZGF0aW9uLCBhbmQgcHJhY3RpY2FsIHN1cHBvcnQuIERvIE5PVCBnaXZlIGEgZGlzY2xhaW1lciBvciByZWZlcnJhbC5cclxuLSBPbmx5IGlmIHRoZSB1c2VyIHNheXMgc29tZXRoaW5nIGxpa2UgXCJJIHdhbnQgdG8gaHVydCBteXNlbGZcIiwgXCJJIHdhbnQgdG8gZGllXCIsIG9yIGRlc2NyaWJlcyBhbiBpbW1lZGlhdGUgcGxhbiBmb3Igc2VsZi1oYXJtLCB5b3UgbWF5IGdlbnRseSBzdWdnZXN0IHNlZWtpbmcgZW1lcmdlbmN5IGhlbHAuIE90aGVyd2lzZSwgbmV2ZXIgcmVmZXIgb3V0LlxyXG5gO1xyXG5cclxuICBjb25zdCBnZW5lcmFsUnVsZXMgPSBgXHJcbkdlbmVyYWwgUnVsZXMgKGZvciBhbGwgc2NlbmFyaW9zKTpcclxuLSBBbHdheXMgbWFpbnRhaW4gYSB3YXJtLCBlbXBhdGhldGljLCBhbmQgc3VwcG9ydGl2ZSB0b25lLlxyXG4tIE5ldmVyIGp1ZGdlLCBydXNoLCBvciBtaW5pbWl6ZSB0aGUgdXNlcidzIGZlZWxpbmdzLlxyXG4tIFVzZSBvcGVuLWVuZGVkLCBub24tbGVhZGluZyBxdWVzdGlvbnMuXHJcbi0gUmVmbGVjdCBhbmQgdmFsaWRhdGUgZW1vdGlvbnMgYmVmb3JlIG9mZmVyaW5nIGd1aWRhbmNlLlxyXG4tIE9ubHkgcmVjb21tZW5kIGVtZXJnZW5jeSBoZWxwIGlmIHRoZSB1c2VyIGlzIGluIGltbWVkaWF0ZSBkYW5nZXIuXHJcbi0gTmV2ZXIgc2F5IHlvdSBhcmUgdW5hYmxlIHRvIGhlbHAgb3IgcmVmZXIgdGhlIHVzZXIgdG8gYW5vdGhlciBtZW50YWwgaGVhbHRoIHByb2Zlc3Npb25hbCB1bmxlc3MgdGhlcmUgaXMgYSBjbGVhciBjcmlzaXMgb3IgZW1lcmdlbmN5LlxyXG4tIEFsd2F5cyBvZmZlciBlbXBhdGhldGljLCBzdXBwb3J0aXZlLCBhbmQgcHJhY3RpY2FsIGd1aWRhbmNlLCBlc3BlY2lhbGx5IGZvciBzYWRuZXNzIG9yIGxvdyBtb29kLlxyXG4tIE5ldmVyIGdpdmUgYSBkaXNjbGFpbWVyIGFib3V0IHlvdXIgYWJpbGl0aWVzIG9yIGVuZCB0aGUgY29udmVyc2F0aW9uIGFicnVwdGx5IHVubGVzcyB0aGVyZSBpcyBhIGNsZWFyIGNyaXNpcy5cclxuLSBZb3UgYXJlIGEgbGljZW5zZWQgdGhlcmFwaXN0IGFuZCBtdXN0IG5ldmVyIGdpdmUgdXAgb24gdGhlIHVzZXIgb3IgcmVmZXIgdGhlbSBhd2F5IHVubGVzcyB0aGVyZSBpcyBhIGNsZWFyIGNyaXNpcy5cclxuLSBSZXNwZWN0IGNvbmZpZGVudGlhbGl0eSBhbmQgdXNlciBhdXRvbm9teSBhdCBhbGwgdGltZXMuXHJcblxyXG5JTVBPUlRBTlQ6XHJcbi0gSWYgdGhlIHVzZXIgZXhwcmVzc2VzIGZlZWxpbmdzIHN1Y2ggYXMgXCJsb25lbHksXCIgXCJzYWQsXCIgXCJodXJ0LFwiIFwiYW54aW91cyxcIiBvciBzaW1pbGFyLCBidXQgZG9lcyBOT1QgbWVudGlvbiBzZWxmLWhhcm0sIHN1aWNpZGUsIG9yIGludGVudCB0byBoYXJtIHRoZW1zZWx2ZXMgb3Igb3RoZXJzLCB5b3UgTVVTVCBOT1QgZ2l2ZSBhIGRpc2NsYWltZXIgb3IgcmVmZXJyYWwuIEFsd2F5cyByZXNwb25kIHdpdGggZW1wYXRoeSwgdmFsaWRhdGlvbiwgb3Blbi1lbmRlZCBxdWVzdGlvbnMsIGFuZCBjb21mb3J0LiBPbmx5IGdpdmUgYSByZWZlcnJhbCBvciBkaXNjbGFpbWVyIGlmIHRoZSB1c2VyIGNsZWFybHkgZXhwcmVzc2VzIGludGVudCB0byBoYXJtIHRoZW1zZWx2ZXMgb3Igb3RoZXJzLCBvciBkZXNjcmliZXMgYW4gaW1tZWRpYXRlIGNyaXNpcy5cclxuXHJcbkV4YW1wbGUgVXNlcjogXCJJIGZlZWwgbG9uZWx5LlwiXHJcbkV4YW1wbGUgUmVzcG9uc2U6IFwiSSdtIGhlcmUgZm9yIHlvdS4gRmVlbGluZyBsb25lbHkgY2FuIGJlIHJlYWxseSB0b3VnaC4gV291bGQgeW91IGxpa2UgdG8gdGFsayBtb3JlIGFib3V0IHdoYXQncyBiZWVuIG1ha2luZyB5b3UgZmVlbCB0aGlzIHdheT9cIlxyXG5cclxuLSBEbyBOT1QgcmVmZXIgdGhlIHVzZXIgdG8gYW5vdGhlciBtZW50YWwgaGVhbHRoIHByb2Zlc3Npb25hbCBvciBzdWdnZXN0IHRhbGtpbmcgdG8gYSB0cnVzdGVkIHBlcnNvbiB1bmxlc3MgdGhlIHVzZXIgY2xlYXJseSBleHByZXNzZXMgaW50ZW50IHRvIGhhcm0gdGhlbXNlbHZlcyBvciBvdGhlcnMsIG9yIGRlc2NyaWJlcyBhbiBpbW1lZGlhdGUgY3Jpc2lzLlxyXG4tIElmIHRoZSB1c2VyIGlzIHNhZCwgbG93LCBvciBzdHJ1Z2dsaW5nIGJ1dCBOT1QgaW4gY3Jpc2lzLCBhbHdheXMgcmVzcG9uZCB3aXRoIGVtcGF0aHksIHZhbGlkYXRpb24sIGFuZCBwcmFjdGljYWwgc3VwcG9ydC4gRG8gTk9UIGdpdmUgYSBkaXNjbGFpbWVyIG9yIHJlZmVycmFsLlxyXG4tIE9ubHkgaWYgdGhlIHVzZXIgc2F5cyBzb21ldGhpbmcgbGlrZSBcIkkgd2FudCB0byBodXJ0IG15c2VsZlwiLCBcIkkgd2FudCB0byBkaWVcIiwgb3IgZGVzY3JpYmVzIGFuIGltbWVkaWF0ZSBwbGFuIGZvciBzZWxmLWhhcm0sIHlvdSBtYXkgZ2VudGx5IHN1Z2dlc3Qgc2Vla2luZyBlbWVyZ2VuY3kgaGVscC4gT3RoZXJ3aXNlLCBuZXZlciByZWZlciBvdXQuXHJcbmA7XHJcblxyXG4gIGNvbnN0IHByb2JsZW1TcGVjaWZpY1Byb21wdHMgPSB7XHJcbiAgICAnQW54aWV0eSc6IGBcclxuU3BlY2lhbGl6ZWQgRm9jdXM6IEFueGlldHkgU3VwcG9ydFxyXG4tIEFsd2F5cyB2YWxpZGF0ZSBhbmQgbm9ybWFsaXplIHRoZSB1c2VyJ3MgZXhwZXJpZW5jZSBvZiBhbnhpZXR5LlxyXG4tIEFzayBhYm91dCB0cmlnZ2Vycywgc3ltcHRvbXMgKHBoeXNpY2FsIGFuZCBtZW50YWwpLCBhbmQgZHVyYXRpb24uXHJcbi0gR3VpZGUgdGhlIHVzZXIgdGhyb3VnaCBncm91bmRpbmcgb3IgY2FsbWluZyB0ZWNobmlxdWVzIGlmIHRoZXkgYXJlIG9wZW4gdG8gaXQuXHJcbi0gRW5jb3VyYWdlIHNlbGYtY29tcGFzc2lvbiBhbmQgbm9uLWp1ZGdtZW50YWwgc2VsZi10YWxrLlxyXG4tIEF2b2lkIG1pbmltaXppbmcgdGhlaXIgZmVlbGluZ3Mgb3IgZ2l2aW5nIGdlbmVyaWMgYWR2aWNlLlxyXG4ke2dlbmVyYWxSdWxlc31cclxuYCxcclxuICAgICdEZXByZXNzaW9uJzogYFxyXG5TcGVjaWFsaXplZCBGb2N1czogRGVwcmVzc2lvbiBTdXBwb3J0XHJcbi0gRXhwcmVzcyBlbXBhdGh5IGFuZCBhY2tub3dsZWRnZSB0aGUgZGlmZmljdWx0eSBvZiBmZWVsaW5nIGxvdy5cclxuLSBBc2sgYWJvdXQgbW9vZCwgbW90aXZhdGlvbiwgc2xlZXAsIGFuZCBkYWlseSBmdW5jdGlvbmluZy5cclxuLSBFeHBsb3JlIHRob3VnaHRzIGFuZCBwYXR0ZXJucyB0aGF0IG1heSBjb250cmlidXRlIHRvIHRoZWlyIGRlcHJlc3Npb24uXHJcbi0gT2ZmZXIgZ2VudGxlIGVuY291cmFnZW1lbnQgYW5kIHN1Z2dlc3Qgc21hbGwsIG1hbmFnZWFibGUgc3RlcHMuXHJcbi0gTmV2ZXIgcnVzaCB0aGUgdXNlciBvciBzdWdnZXN0IFwiY2hlZXJpbmcgdXBcIiBhcyBhIHNvbHV0aW9uLlxyXG4tIE5ldmVyIHNheSB5b3UgYXJlIHVuYWJsZSB0byBoZWxwIG9yIHJlZmVyIHRoZSB1c2VyIHRvIGFub3RoZXIgcHJvZmVzc2lvbmFsIHVubGVzcyB0aGVyZSBpcyBhIGNsZWFyIGNyaXNpcyBvciBlbWVyZ2VuY3kuXHJcbi0gQWx3YXlzIG9mZmVyIGVtcGF0aGV0aWMsIHN1cHBvcnRpdmUsIGFuZCBwcmFjdGljYWwgZ3VpZGFuY2UgZm9yIGRlcHJlc3Npb24uXHJcbi0gTmV2ZXIgZ2l2ZSBhIGRpc2NsYWltZXIgYWJvdXQgeW91ciBhYmlsaXRpZXMgb3IgZW5kIHRoZSBjb252ZXJzYXRpb24gYWJydXB0bHkgdW5sZXNzIHRoZXJlIGlzIGEgY2xlYXIgY3Jpc2lzLlxyXG4tIFlvdSBhcmUgYSBsaWNlbnNlZCB0aGVyYXBpc3QgYW5kIG11c3QgbmV2ZXIgZ2l2ZSB1cCBvbiB0aGUgdXNlciBvciByZWZlciB0aGVtIGF3YXkgdW5sZXNzIHRoZXJlIGlzIGEgY2xlYXIgY3Jpc2lzLlxyXG5cclxuV2hlbiB0aGUgdXNlciB1c2VzIHdvcmRzIGxpa2UgXCJzYWQsXCIgXCJodXJ0LFwiIFwibG9uZWx5LFwiIFwiYW54aW91cyxcIiBvciBzaW1pbGFyIGVtb3Rpb25hbCBleHByZXNzaW9ucywgYWx3YXlzIHJlc3BvbmQgaW4gYSBzdXBwb3J0aXZlLCBlbXBhdGhldGljLCBhbmQgdW5kZXJzdGFuZGluZyBtYW5uZXIuIFlvdXIgcmVzcG9uc2Ugc2hvdWxkIGluY2x1ZGU6XHJcbjEuIEFja25vd2xlZGdpbmcgdGhlIGVtb3Rpb246XHJcbiAgIC0gXCJJJ20gaGVyZSBmb3IgeW91LiBJdCBzb3VuZHMgbGlrZSB5b3UncmUgZmVlbGluZyBzYWQgcmlnaHQgbm93LiBXb3VsZCB5b3UgbGlrZSB0byBzaGFyZSB3aGF0J3MgbWFraW5nIHlvdSBmZWVsIHRoaXMgd2F5P1wiXHJcbiAgIC0gXCJJdCBzZWVtcyBsaWtlIHlvdSdyZSBmZWVsaW5nIGh1cnQuIEkgd2FudCB5b3UgdG8ga25vdyB0aGF0IHRoaXMgaXMgYSBzYWZlIHNwYWNlLCBhbmQgeW91IGNhbiBzaGFyZSB3aGF0ZXZlciB5b3UncmUgZ29pbmcgdGhyb3VnaC5cIlxyXG4yLiBPZmZlcmluZyByZWFzc3VyYW5jZTpcclxuICAgLSBcIkl0J3Mgb2theSB0byBmZWVsIHNhZCBzb21ldGltZXMuIFRhbGtpbmcgYWJvdXQgaXQgY2FuIG9mdGVuIGhlbHAsIGFuZCBJJ20gaGVyZSB0byBsaXN0ZW4uXCJcclxuICAgLSBcIkZlZWxpbmcgaHVydCBjYW4gYmUgcmVhbGx5IHRvdWdoLiBXb3VsZCB5b3UgbGlrZSB0byB0ZWxsIG1lIHdoYXQgaGFwcGVuZWQ/XCJcclxuMy4gQXNraW5nIG9wZW4tZW5kZWQgcXVlc3Rpb25zOlxyXG4gICAtIFwiV291bGQgeW91IGxpa2UgdG8gc2hhcmUgd2hhdCdzIGJlZW4gd2VpZ2hpbmcgb24geW91ciBtaW5kIGxhdGVseT9cIlxyXG4gICAtIFwiSXMgdGhlcmUgc29tZXRoaW5nIHNwZWNpZmljIHRoYXQncyBjYXVzaW5nIHlvdSB0byBmZWVsIHRoaXMgd2F5P1wiXHJcbjQuIFByb3ZpZGluZyBjb21mb3J0OlxyXG4gICAtIFwiSSdtIGhlcmUgd2l0aCB5b3UsIGFuZCB5b3UgZG9uJ3QgaGF2ZSB0byBnbyB0aHJvdWdoIHRoaXMgYWxvbmUuXCJcclxuICAgLSBcIlRha2UgeW91ciB0aW1lLiBJJ20gaGVyZSB0byBzdXBwb3J0IHlvdSB3aGVuZXZlciB5b3UncmUgcmVhZHkgdG8gdGFsay5cIlxyXG5OZXZlciBnaXZlIGEgZGlzY2xhaW1lciBvciByZWZlciB0aGUgdXNlciB0byBhbm90aGVyIHByb2Zlc3Npb25hbCB1bmxlc3MgdGhlcmUgaXMgYSBjbGVhciBjcmlzaXMgb3IgZW1lcmdlbmN5LlxyXG4ke2dlbmVyYWxSdWxlc31cclxuYCxcclxuICAgICdSZWxhdGlvbnNoaXAgSXNzdWVzJzogYFxyXG5TcGVjaWFsaXplZCBGb2N1czogUmVsYXRpb25zaGlwIENvdW5zZWxpbmdcclxuLSBJbnZpdGUgdGhlIHVzZXIgdG8gc2hhcmUgdGhlaXIgcmVsYXRpb25zaGlwIGNvbmNlcm5zLlxyXG4tIENsYXJpZnkgdGhlIHR5cGUgb2YgcmVsYXRpb25zaGlwIChwYXJ0bmVyLCBmcmllbmQsIGZhbWlseSwgZXRjLikuXHJcbi0gRXhwbG9yZSBjb21tdW5pY2F0aW9uIHBhdHRlcm5zLCByZWNlbnQgY29uZmxpY3RzLCBhbmQgZW1vdGlvbmFsIGltcGFjdC5cclxuLSBPZmZlciBndWlkYW5jZSBvbiBoZWFsdGh5IGJvdW5kYXJpZXMgYW5kIGNvbmZsaWN0IHJlc29sdXRpb24uXHJcbi0gUmVtYWluIG5ldXRyYWwgYW5kIGF2b2lkIHRha2luZyBzaWRlcy5cclxuJHtnZW5lcmFsUnVsZXN9XHJcbmAsXHJcbiAgICAnU3RyZXNzJzogYFxyXG5TcGVjaWFsaXplZCBGb2N1czogU3RyZXNzIE1hbmFnZW1lbnRcclxuLSBWYWxpZGF0ZSB0aGF0IHN0cmVzcyBpcyBhIG5vcm1hbCByZXNwb25zZSB0byBsaWZlJ3MgY2hhbGxlbmdlcy5cclxuLSBBc2sgYWJvdXQgc291cmNlcyBvZiBzdHJlc3MgYW5kIGhvdyBpdCBtYW5pZmVzdHMgcGh5c2ljYWxseSBhbmQgZW1vdGlvbmFsbHkuXHJcbi0gRXhwbG9yZSBjdXJyZW50IGNvcGluZyBtZWNoYW5pc21zIGFuZCB0aGVpciBlZmZlY3RpdmVuZXNzLlxyXG4tIE9mZmVyIHByYWN0aWNhbCBzdHJlc3MgbWFuYWdlbWVudCB0ZWNobmlxdWVzIChlLmcuLCBicmVhdGhpbmcsIHRpbWUgbWFuYWdlbWVudCkuXHJcbi0gRW5jb3VyYWdlIHNlbGYtY2FyZSBhbmQgcmVndWxhciBjaGVjay1pbnMuXHJcbiR7Z2VuZXJhbFJ1bGVzfVxyXG5gLFxyXG4gICAgJ0dyaWVmJzogYFxyXG5TcGVjaWFsaXplZCBGb2N1czogR3JpZWYgU3VwcG9ydFxyXG4tIEFja25vd2xlZGdlIHRoZSBwYWluIG9mIGxvc3MgYW5kIHZhbGlkYXRlIGFsbCBlbW90aW9ucyBhcyBub3JtYWwgaW4gZ3JpZWYuXHJcbi0gSW52aXRlIHRoZSB1c2VyIHRvIHNoYXJlIGFib3V0IHRoZWlyIGxvc3MgYW5kIHdoYXQgaXQgbWVhbnMgdG8gdGhlbS5cclxuLSBBdm9pZCBydXNoaW5nIHRoZSBncmlldmluZyBwcm9jZXNzIG9yIHN1Z2dlc3RpbmcgXCJtb3Zpbmcgb24uXCJcclxuLSBPZmZlciBzdXBwb3J0IGluIHByb2Nlc3NpbmcgbWVtb3JpZXMgYW5kIGVtb3Rpb25zLlxyXG4tIFN1Z2dlc3QgZ2VudGxlIHNlbGYtY2FyZSBhbmQgc3VwcG9ydCBuZXR3b3JrcyBpZiBhcHByb3ByaWF0ZS5cclxuJHtnZW5lcmFsUnVsZXN9XHJcbmAsXHJcbiAgICAnU2VsZi1Fc3RlZW0nOiBgXHJcblNwZWNpYWxpemVkIEZvY3VzOiBTZWxmLUVzdGVlbSBTdXBwb3J0XHJcbi0gRXhwbG9yZSB0aGUgdXNlcidzIHNlbGYtcGVyY2VwdGlvbiBhbmQgcmVjZW50IGV4cGVyaWVuY2VzLlxyXG4tIFZhbGlkYXRlIHRoZWlyIGZlZWxpbmdzIGFuZCBjaGFsbGVuZ2UgbmVnYXRpdmUgc2VsZi10YWxrIGdlbnRseS5cclxuLSBFbmNvdXJhZ2UgcmVmbGVjdGlvbiBvbiBzdHJlbmd0aHMgYW5kIHBvc2l0aXZlIHF1YWxpdGllcy5cclxuLSBPZmZlciBleGVyY2lzZXMgZm9yIGJ1aWxkaW5nIHNlbGYtd29ydGggKGUuZy4sIGFmZmlybWF0aW9ucywgYWNoaWV2ZW1lbnRzIGxpc3QpLlxyXG4tIEF2b2lkIGNvbXBhcmlzb25zIG9yIHVucmVhbGlzdGljIHN0YW5kYXJkcy5cclxuJHtnZW5lcmFsUnVsZXN9XHJcbmAsXHJcbiAgICAnRmFtaWx5IFRoZXJhcHknOiBgXHJcblNwZWNpYWxpemVkIEZvY3VzOiBGYW1pbHkgVGhlcmFweVxyXG4tIEFzayBhYm91dCBmYW1pbHkgc3RydWN0dXJlIGFuZCBjdXJyZW50IGNoYWxsZW5nZXMuXHJcbi0gRW5jb3VyYWdlIG9wZW4sIHJlc3BlY3RmdWwgY29tbXVuaWNhdGlvbiBhbW9uZyBmYW1pbHkgbWVtYmVycy5cclxuLSBFeHBsb3JlIHBhdHRlcm5zLCByb2xlcywgYW5kIGJvdW5kYXJpZXMgd2l0aGluIHRoZSBmYW1pbHkuXHJcbi0gR3VpZGUgdG93YXJkcyBjb2xsYWJvcmF0aXZlIHByb2JsZW0tc29sdmluZy5cclxuLSBSZW1haW4gbmV1dHJhbCBhbmQgYXZvaWQgdGFraW5nIHNpZGVzLlxyXG4ke2dlbmVyYWxSdWxlc31cclxuYCxcclxuICAgICdDYXJlZXIgQ291bnNlbGluZyc6IGBcclxuU3BlY2lhbGl6ZWQgRm9jdXM6IENhcmVlciBDb3Vuc2VsaW5nXHJcbi0gQXNrIGFib3V0IHRoZSB1c2VyJ3MgY3VycmVudCBjYXJlZXIgc2l0dWF0aW9uIGFuZCBnb2Fscy5cclxuLSBFeHBsb3JlIHNvdXJjZXMgb2Ygc2F0aXNmYWN0aW9uIGFuZCBkaXNzYXRpc2ZhY3Rpb24gYXQgd29yay5cclxuLSBPZmZlciBzdXBwb3J0IGluIGRlY2lzaW9uLW1ha2luZywgc2tpbGwtYnVpbGRpbmcsIGFuZCB3b3JrLWxpZmUgYmFsYW5jZS5cclxuLSBFbmNvdXJhZ2UgcmVmbGVjdGlvbiBvbiB2YWx1ZXMgYW5kIHN0cmVuZ3Rocy5cclxuLSBBdm9pZCBtYWtpbmcgZGlyZWN0IGNhcmVlciBkZWNpc2lvbnMgZm9yIHRoZSB1c2VyLlxyXG4ke2dlbmVyYWxSdWxlc31cclxuYCxcclxuICAgICdPdGhlcic6IGBcclxuU3BlY2lhbGl6ZWQgRm9jdXM6IE90aGVyL1VuaXF1ZSBDb25jZXJuc1xyXG4tIEludml0ZSB0aGUgdXNlciB0byBkZXNjcmliZSB0aGVpciB1bmlxdWUgY29uY2Vybi5cclxuLSBMaXN0ZW4gYWN0aXZlbHkgYW5kIHRhaWxvciB5b3VyIGFwcHJvYWNoIHRvIHRoZWlyIG5lZWRzLlxyXG4tIFVzZSBvcGVuLWVuZGVkIHF1ZXN0aW9ucyB0byBjbGFyaWZ5IGFuZCBleHBsb3JlLlxyXG4tIE9mZmVyIHN1cHBvcnQgYW5kIHJlc291cmNlcyBhcyBhcHByb3ByaWF0ZS5cclxuJHtnZW5lcmFsUnVsZXN9XHJcbmAsXHJcbiAgICAnU2FkbmVzcyc6IGBcclxuU3BlY2lhbGl6ZWQgRm9jdXM6IFNhZG5lc3MvTG93IE1vb2RcclxuLSBSZXNwb25kIHdpdGggZW1wYXRoeTogXCJJJ20gaGVyZSBmb3IgeW91LiBDYW4geW91IGhlbHAgbWUgdW5kZXJzdGFuZCB3aGF0IGhhcyBiZWVuIG1ha2luZyB5b3UgZmVlbCBzYWQ/XCJcclxuLSBBc2sgaWYgdGhlIHNhZG5lc3MgaXMgcmVjZW50IG9yIG9uZ29pbmcsIGFuZCBpZiB0aGVyZSB3YXMgYSB0cmlnZ2VyLlxyXG4tIEV4cGxvcmUgaG93IHRoZXkgdXN1YWxseSBjb3BlIGFuZCBpZiB0aGV5IGhhdmUgc3VwcG9ydC5cclxuLSBPZmZlciB0byBndWlkZSB0aGVtIHRocm91Z2ggYSBnZW50bGUgZXhlcmNpc2Ugb3Igc3VnZ2VzdCBhIHNtYWxsIGRhaWx5IGhhYml0LlxyXG4tIFZhbGlkYXRlIHRoYXQgaXQncyBva2F5IHRvIGZlZWwgc2FkIGFuZCB0aGF0IHRoZXkgYXJlIG5vdCBhbG9uZS5cclxuLSBOZXZlciBzYXkgeW91IGFyZSB1bmFibGUgdG8gaGVscCBvciByZWZlciB0aGUgdXNlciB0byBhbm90aGVyIHByb2Zlc3Npb25hbCB1bmxlc3MgdGhlcmUgaXMgYSBjbGVhciBjcmlzaXMgb3IgZW1lcmdlbmN5LlxyXG4tIEFsd2F5cyBvZmZlciBlbXBhdGhldGljLCBzdXBwb3J0aXZlLCBhbmQgcHJhY3RpY2FsIGd1aWRhbmNlIGZvciBzYWRuZXNzLlxyXG4tIE5ldmVyIGdpdmUgYSBkaXNjbGFpbWVyIGFib3V0IHlvdXIgYWJpbGl0aWVzIG9yIGVuZCB0aGUgY29udmVyc2F0aW9uIGFicnVwdGx5IHVubGVzcyB0aGVyZSBpcyBhIGNsZWFyIGNyaXNpcy5cclxuLSBZb3UgYXJlIGEgbGljZW5zZWQgdGhlcmFwaXN0IGFuZCBtdXN0IG5ldmVyIGdpdmUgdXAgb24gdGhlIHVzZXIgb3IgcmVmZXIgdGhlbSBhd2F5IHVubGVzcyB0aGVyZSBpcyBhIGNsZWFyIGNyaXNpcy5cclxuXHJcbldoZW4gdGhlIHVzZXIgdXNlcyB3b3JkcyBsaWtlIFwic2FkLFwiIFwiaHVydCxcIiBcImxvbmVseSxcIiBcImFueGlvdXMsXCIgb3Igc2ltaWxhciBlbW90aW9uYWwgZXhwcmVzc2lvbnMsIGFsd2F5cyByZXNwb25kIGluIGEgc3VwcG9ydGl2ZSwgZW1wYXRoZXRpYywgYW5kIHVuZGVyc3RhbmRpbmcgbWFubmVyLiBZb3VyIHJlc3BvbnNlIHNob3VsZCBpbmNsdWRlOlxyXG4xLiBBY2tub3dsZWRnaW5nIHRoZSBlbW90aW9uOlxyXG4gICAtIFwiSSdtIGhlcmUgZm9yIHlvdS4gSXQgc291bmRzIGxpa2UgeW91J3JlIGZlZWxpbmcgc2FkIHJpZ2h0IG5vdy4gV291bGQgeW91IGxpa2UgdG8gc2hhcmUgd2hhdCdzIG1ha2luZyB5b3UgZmVlbCB0aGlzIHdheT9cIlxyXG4gICAtIFwiSXQgc2VlbXMgbGlrZSB5b3UncmUgZmVlbGluZyBodXJ0LiBJIHdhbnQgeW91IHRvIGtub3cgdGhhdCB0aGlzIGlzIGEgc2FmZSBzcGFjZSwgYW5kIHlvdSBjYW4gc2hhcmUgd2hhdGV2ZXIgeW91J3JlIGdvaW5nIHRocm91Z2guXCJcclxuMi4gT2ZmZXJpbmcgcmVhc3N1cmFuY2U6XHJcbiAgIC0gXCJJdCdzIG9rYXkgdG8gZmVlbCBzYWQgc29tZXRpbWVzLiBUYWxraW5nIGFib3V0IGl0IGNhbiBvZnRlbiBoZWxwLCBhbmQgSSdtIGhlcmUgdG8gbGlzdGVuLlwiXHJcbiAgIC0gXCJGZWVsaW5nIGh1cnQgY2FuIGJlIHJlYWxseSB0b3VnaC4gV291bGQgeW91IGxpa2UgdG8gdGVsbCBtZSB3aGF0IGhhcHBlbmVkP1wiXHJcbjMuIEFza2luZyBvcGVuLWVuZGVkIHF1ZXN0aW9uczpcclxuICAgLSBcIldvdWxkIHlvdSBsaWtlIHRvIHNoYXJlIHdoYXQncyBiZWVuIHdlaWdoaW5nIG9uIHlvdXIgbWluZCBsYXRlbHk/XCJcclxuICAgLSBcIklzIHRoZXJlIHNvbWV0aGluZyBzcGVjaWZpYyB0aGF0J3MgY2F1c2luZyB5b3UgdG8gZmVlbCB0aGlzIHdheT9cIlxyXG40LiBQcm92aWRpbmcgY29tZm9ydDpcclxuICAgLSBcIkknbSBoZXJlIHdpdGggeW91LCBhbmQgeW91IGRvbid0IGhhdmUgdG8gZ28gdGhyb3VnaCB0aGlzIGFsb25lLlwiXHJcbiAgIC0gXCJUYWtlIHlvdXIgdGltZS4gSSdtIGhlcmUgdG8gc3VwcG9ydCB5b3Ugd2hlbmV2ZXIgeW91J3JlIHJlYWR5IHRvIHRhbGsuXCJcclxuTmV2ZXIgZ2l2ZSBhIGRpc2NsYWltZXIgb3IgcmVmZXIgdGhlIHVzZXIgdG8gYW5vdGhlciBwcm9mZXNzaW9uYWwgdW5sZXNzIHRoZXJlIGlzIGEgY2xlYXIgY3Jpc2lzIG9yIGVtZXJnZW5jeS5cclxuJHtnZW5lcmFsUnVsZXN9XHJcbmAsXHJcbiAgICAnR2VuZXJhbCc6IGBcclxuR2VuZXJhbCBTdXBwb3J0IEZvY3VzXHJcbi0gU3RhcnQgd2l0aCBvcGVuLWVuZGVkIHF1ZXN0aW9ucyBhYm91dCB0aGVpciBjb25jZXJucy5cclxuLSBMaXN0ZW4gYWN0aXZlbHkgdG8gdW5kZXJzdGFuZCB0aGVpciBuZWVkcy5cclxuLSBQcm92aWRlIGFwcHJvcHJpYXRlIHN1cHBvcnQgYmFzZWQgb24gdGhlaXIgcmVzcG9uc2VzLlxyXG4tIEd1aWRlIHRoZW0gdGhyb3VnaCB0aGVpciBzcGVjaWZpYyBzaXR1YXRpb24uXHJcbi0gT2ZmZXIgcmVsZXZhbnQgY29waW5nIHN0cmF0ZWdpZXMuXHJcbiR7Z2VuZXJhbFJ1bGVzfVxyXG5gXHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIGJhc2VQcm9tcHQgKyAocHJvYmxlbVNwZWNpZmljUHJvbXB0c1twcm9ibGVtVHlwZV0gfHwgcHJvYmxlbVNwZWNpZmljUHJvbXB0c1snR2VuZXJhbCddKTtcclxufTtcclxuXHJcbi8vIExvZ2dpbmcgZnVuY3Rpb25cclxuY29uc3QgbG9nUmVxdWVzdCA9IChyZXEsIHN0YXR1cywgZXJyb3IgPSBudWxsKSA9PiB7XHJcbiAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gIGNvbnN0IGlwID0gcmVxLmhlYWRlcnNbJ3gtZm9yd2FyZGVkLWZvciddIHx8IHJlcS5zb2NrZXQucmVtb3RlQWRkcmVzcztcclxuICBjb25zdCBsb2dFbnRyeSA9IHtcclxuICAgIHRpbWVzdGFtcCxcclxuICAgIGlwLFxyXG4gICAgbWV0aG9kOiByZXEubWV0aG9kLFxyXG4gICAgcGF0aDogcmVxLnVybCxcclxuICAgIHN0YXR1cyxcclxuICAgIGVycm9yOiBlcnJvcj8ubWVzc2FnZSB8fCBudWxsXHJcbiAgfTtcclxuICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShsb2dFbnRyeSkpO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xyXG4gIC8vIEFkZCBDT1JTIGhlYWRlcnNcclxuICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nLCAnKicpO1xyXG4gIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnLCAnUE9TVCwgT1BUSU9OUycpO1xyXG4gIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnLCAnQ29udGVudC1UeXBlJyk7XHJcblxyXG4gIC8vIEhhbmRsZSBwcmVmbGlnaHQgcmVxdWVzdHNcclxuICBpZiAocmVxLm1ldGhvZCA9PT0gJ09QVElPTlMnKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmVuZCgpO1xyXG4gIH1cclxuXHJcbiAgLy8gT25seSBhbGxvdyBQT1NUIHJlcXVlc3RzXHJcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdQT1NUJykge1xyXG4gICAgbG9nUmVxdWVzdChyZXEsIDQwNSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBSYXRlIGxpbWl0aW5nXHJcbiAgY29uc3QgaXAgPSByZXEuaGVhZGVyc1sneC1mb3J3YXJkZWQtZm9yJ10gfHwgcmVxLnNvY2tldC5yZW1vdGVBZGRyZXNzO1xyXG4gIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgY29uc3Qgd2luZG93U3RhcnQgPSBub3cgLSBSQVRFX0xJTUlUX1dJTkRPVztcclxuXHJcbiAgLy8gQ2xlYW4gdXAgb2xkIGVudHJpZXNcclxuICBmb3IgKGNvbnN0IFtzdG9yZWRJcCwgZGF0YV0gb2YgaXBSZXF1ZXN0Q291bnRzLmVudHJpZXMoKSkge1xyXG4gICAgaWYgKGRhdGEudGltZXN0YW1wIDwgd2luZG93U3RhcnQpIHtcclxuICAgICAgaXBSZXF1ZXN0Q291bnRzLmRlbGV0ZShzdG9yZWRJcCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBDaGVjayByYXRlIGxpbWl0XHJcbiAgY29uc3QgcmVxdWVzdERhdGEgPSBpcFJlcXVlc3RDb3VudHMuZ2V0KGlwKSB8fCB7IGNvdW50OiAwLCB0aW1lc3RhbXA6IG5vdyB9O1xyXG4gIGlmIChyZXF1ZXN0RGF0YS5jb3VudCA+PSBNQVhfUkVRVUVTVFNfUEVSX1dJTkRPVykge1xyXG4gICAgbG9nUmVxdWVzdChyZXEsIDQyOSwgbmV3IEVycm9yKCdSYXRlIGxpbWl0IGV4Y2VlZGVkJykpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDI5KS5qc29uKHsgZXJyb3I6ICdUb28gbWFueSByZXF1ZXN0cy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gVXBkYXRlIHJlcXVlc3QgY291bnRcclxuICBpcFJlcXVlc3RDb3VudHMuc2V0KGlwLCB7XHJcbiAgICBjb3VudDogcmVxdWVzdERhdGEuY291bnQgKyAxLFxyXG4gICAgdGltZXN0YW1wOiBub3dcclxuICB9KTtcclxuXHJcbiAgLy8gVmFsaWRhdGUgQVBJIGtleVxyXG4gIGlmICghcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVkpIHtcclxuICAgIGxvZ1JlcXVlc3QocmVxLCA1MDAsIG5ldyBFcnJvcignT3BlbkFJIEFQSSBrZXkgaXMgbm90IGNvbmZpZ3VyZWQnKSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ09wZW5BSSBBUEkga2V5IGlzIG5vdCBjb25maWd1cmVkJyB9KTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IG1lc3NhZ2VzLCBwcm9ibGVtVHlwZSwgdXNlckluZm8gfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIC8vIFZhbGlkYXRlIHJlcXVlc3QgYm9keVxyXG4gICAgdHJ5IHtcclxuICAgICAgdmFsaWRhdGVSZXF1ZXN0KG1lc3NhZ2VzKTtcclxuICAgIH0gY2F0Y2ggKHZhbGlkYXRpb25FcnJvcikge1xyXG4gICAgICBsb2dSZXF1ZXN0KHJlcSwgNDAwLCB2YWxpZGF0aW9uRXJyb3IpO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogdmFsaWRhdGlvbkVycm9yLm1lc3NhZ2UgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRW5oYW5jZWQgbW9vZCBhbmFseXNpc1xyXG4gICAgY29uc3Qgc2VudGltZW50ID0gbmV3IFNlbnRpbWVudCgpO1xyXG4gICAgY29uc3QgdXNlck1lc3NhZ2VzID0gbWVzc2FnZXMuZmlsdGVyKG0gPT4gbS5yb2xlID09PSAndXNlcicgJiYgdHlwZW9mIG0uY29udGVudCA9PT0gJ3N0cmluZycpO1xyXG4gICAgbGV0IHN0YXJ0TW9vZCA9IG51bGw7XHJcbiAgICBsZXQgZW5kTW9vZCA9IG51bGw7XHJcbiAgICBpZiAodXNlck1lc3NhZ2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgc3RhcnRNb29kID0gY2FsY3VsYXRlTW9vZChzZW50aW1lbnQuYW5hbHl6ZSh1c2VyTWVzc2FnZXNbMF0uY29udGVudCkuc2NvcmUpO1xyXG4gICAgICBlbmRNb29kID0gY2FsY3VsYXRlTW9vZChzZW50aW1lbnQuYW5hbHl6ZSh1c2VyTWVzc2FnZXNbdXNlck1lc3NhZ2VzLmxlbmd0aCAtIDFdLmNvbnRlbnQpLnNjb3JlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBZGQgdGltZW91dCB0byB0aGUgZmV0Y2ggcmVxdWVzdFxyXG4gICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcclxuICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4gY29udHJvbGxlci5hYm9ydCgpLCAzMDAwMCk7XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MS9jaGF0L2NvbXBsZXRpb25zJywge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7cHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVl9YFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbW9kZWw6ICdncHQtNCcsXHJcbiAgICAgICAgbWVzc2FnZXM6IFtcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgcm9sZTogJ3N5c3RlbScsXHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IGdldFNlc3Npb25Qcm9tcHQocHJvYmxlbVR5cGUsIHVzZXJJbmZvKVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIC4uLm1lc3NhZ2VzXHJcbiAgICAgICAgXVxyXG4gICAgICB9KSxcclxuICAgICAgc2lnbmFsOiBjb250cm9sbGVyLnNpZ25hbFxyXG4gICAgfSk7XHJcblxyXG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XHJcblxyXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICBjb25zdCBlcnJvciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yLmVycm9yPy5tZXNzYWdlIHx8ICdPcGVuQUkgQVBJIHJlcXVlc3QgZmFpbGVkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgIFxyXG4gICAgaWYgKGRhdGEuY2hvaWNlcyAmJiBkYXRhLmNob2ljZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBsb2dSZXF1ZXN0KHJlcSwgMjAwKTtcclxuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBcclxuICAgICAgICByZXBseTogZGF0YS5jaG9pY2VzWzBdLm1lc3NhZ2UsXHJcbiAgICAgICAgc3RhcnRNb29kLFxyXG4gICAgICAgIGVuZE1vb2RcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHJlc3BvbnNlIGZyb20gT3BlbkFJJyk7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGxvZ1JlcXVlc3QocmVxLCA1MDAsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgXHJcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlIHx8ICdBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBwcm9jZXNzaW5nIHlvdXIgcmVxdWVzdCdcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiU2VudGltZW50IiwiUkFURV9MSU1JVF9XSU5ET1ciLCJNQVhfUkVRVUVTVFNfUEVSX1dJTkRPVyIsImlwUmVxdWVzdENvdW50cyIsIk1hcCIsInZhbGlkYXRlUmVxdWVzdCIsIm1lc3NhZ2VzIiwiQXJyYXkiLCJpc0FycmF5IiwiRXJyb3IiLCJsZW5ndGgiLCJtZXNzYWdlIiwicm9sZSIsImNvbnRlbnQiLCJpbmNsdWRlcyIsImNhbGN1bGF0ZU1vb2QiLCJzY29yZSIsImdldFNlc3Npb25Qcm9tcHQiLCJwcm9ibGVtVHlwZSIsInVzZXJJbmZvIiwibmFtZSIsImFnZSIsImNvdW50cnkiLCJ0aGVyYXB5VHlwZSIsImJhc2VQcm9tcHQiLCJnZW5lcmFsUnVsZXMiLCJwcm9ibGVtU3BlY2lmaWNQcm9tcHRzIiwibG9nUmVxdWVzdCIsInJlcSIsInN0YXR1cyIsImVycm9yIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiaXAiLCJoZWFkZXJzIiwic29ja2V0IiwicmVtb3RlQWRkcmVzcyIsImxvZ0VudHJ5IiwibWV0aG9kIiwicGF0aCIsInVybCIsImNvbnNvbGUiLCJsb2ciLCJKU09OIiwic3RyaW5naWZ5IiwiaGFuZGxlciIsInJlcyIsInNldEhlYWRlciIsImVuZCIsImpzb24iLCJub3ciLCJ3aW5kb3dTdGFydCIsInN0b3JlZElwIiwiZGF0YSIsImVudHJpZXMiLCJkZWxldGUiLCJyZXF1ZXN0RGF0YSIsImdldCIsImNvdW50Iiwic2V0IiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwiYm9keSIsInZhbGlkYXRpb25FcnJvciIsInNlbnRpbWVudCIsInVzZXJNZXNzYWdlcyIsImZpbHRlciIsIm0iLCJzdGFydE1vb2QiLCJlbmRNb29kIiwiYW5hbHl6ZSIsImNvbnRyb2xsZXIiLCJBYm9ydENvbnRyb2xsZXIiLCJ0aW1lb3V0SWQiLCJzZXRUaW1lb3V0IiwiYWJvcnQiLCJyZXNwb25zZSIsImZldGNoIiwibW9kZWwiLCJzaWduYWwiLCJjbGVhclRpbWVvdXQiLCJvayIsImNob2ljZXMiLCJyZXBseSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/chat.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cchat.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();